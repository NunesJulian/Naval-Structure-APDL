/Pmacro
/PREP7
/GRAPHICS,POWER
!Condição para realização da macro
        *IF,cond_esp_min,LT,0.98,OR,cond_smp_smm,LT,0.98,then
            tensao = 100000
            massa_metro = 1000
            *cfopen,'tensao.txt',' ',' '
            *VWRITE,tensao, , , , , , , , ,
            (f12.4)
            *CFCLOS
            *cfopen,'Massa_por_metro.txt',' ',' '
            *vwrite,massa_metro, , , , , , , , ,
            (f12.4)
            *CFCLOS
            /EXIT,nosave
        *ENDIF
!Dados entrada
    ID = 4
    !Dados da otimização
    !Correções do ID
        *IF,ID,NE,1,THEN    
            L_TA = 0
            H_MAX_TA = 0
            H_MIN_TA = 0
        *ENDIF
        *IF,ID,NE,3,THEN
            qnt_CM = 0
            qnt_RP_CM = 0
            qnt_RL_CM = 0
        *ENDIF
    !Outros Dados
        pi = 3.141592
        secao = 10000 
        rho_agua = 1.025e-9
!Dados Projeto
    MPTEMP,
    MPTEMP,1,0
    !Módulo de Elasticidade
        MPDATA,EX,1,,E_aco
    !Coeficiente de poisson
        MPDATA,PRXY,1,,Poisson_aco
    !Densidade
        MPDATA,DENS,1,,Rho_aco
    !Configurações
        /UNITS,MPA
        WPSTYLE,,,,,,,,1
!Modelagem
    !Modelagem Casca
        !Elemento
            ET,1,SHELL281
        !Keypoints
            !Correção DeadRise
                auxD = sin(pi*A_Deadrise/180)*(boca/2)
            !Correção Camber
                auxC = sin(pi*A_Camber/180)*(boca/2)
            k,1,boca/2,-auxD,0
            k,2,0,0,0
            *IF,hdf,GT,0,THEN
                k,3,0,hdf,0
                k,4,0,pontal,0
                *IF,esp_dc,GT,0,THEN
                    aux_C_DC = sin(pi*A_Camber/180)*(esp_dc)
                    k,5,esp_dc,pontal+aux_C_DC,0
                    k,6,boca/2,pontal+auxC,0
                    K,7,boca/2,hdf,0
                    k,8,esp_dc,hdf,0
                    k,9,boca/2,hdf,secao
                    k,10,esp_dc,hdf,secao
                *ELSE
                    K,5,boca/2,pontal+auxC,0
                    k,6,boca/2,hdf,0
                    k,7,boca/2,hdf,secao
                *ENDIF
            *ELSE
                k,3,0,pontal,0
                *IF,esp_dc,GT,0,THEN
                    aux_C_DC = sin(pi*A_Camber/180)*(esp_dc)
                    aux_D_DC = sin(pi*a_Deadrise/180)*(esp_dc)
                    k,4,esp_dc,pontal+aux_C_DC,0
                    k,5,boca/2,pontal+auxC,0
                    k,6,esp_dc,-aux_D_DC,0
                *ELSE
                    K,4,boca/2,pontal+auxC,0
                *ENDIF
            *ENDIF
        !Criando Linhas 
            *IF,hdf,GT,0,THEN
                *IF,esp_dc,GT,0,THEN
                    l,1,2
                    *REPEAT,5,1,1
                *ELSE
                    l,1,2
                    *REPEAT,4,1,1
                *ENDIF
            *ELSE
                *IF,esp_dc,GT,0,THEN
                    l,1,6
                    l,6,2
                    l,2,3
                    *REPEAT,3,1,1
                *ELSE
                    l,1,2
                    *REPEAT,3,1,1
                *ENDIF
            *ENDIF
        !Bojo
            *IF,hdf,EQ,0,and,esp_dc,GT,0,THEN
                LFILLT,2,3,r_bojo
            *ELSE
                LFILLT,1,2,r_bojo
            *ENDIF 
        !Máximos x e y do bojo
            ksel,s,loc,y,-pontal,0
            ksel,r,loc,x,0,r_bojo
            *GET,nbojo,kp,0,num,max
            *GET,xbojo,kp,nbojo,loc,x
            ksel,s,loc,x,0
            ksel,r,loc,y,0,r_bojo
            *GET,nbojo,kp,0,num,max
            *GET,ybojo,kp,nbojo,loc,y
            ksel,s,kp,,all
        !Criando quilha
            k,999,boca/2,-auxD,secao
            l,1,999
            *GET,linha_Quilha,line,0,num,max
        !Extruindo
            lsel,u,,,linha_Quilha
            ADRAG,all,,,,,,linha_Quilha
            *IF,hdf,GT,0,THEN
                *IF,esp_dc,GT,0,THEN
                    l,7,8
                    l,8,3
                    l,5,8
                    l,9,10
                    ksel,s,loc,x,0
                    ksel,r,loc,y,hdf
                    *GET,ponto1,KP,0,num,max
                    ksel,s,loc,x,esp_dc
                    ksel,r,loc,y,pontal+aux_C_DC
                    *GET,ponto2,kp,0,num,max
                    ksel,s,kp,,all
                    l,10,ponto1
                    l,ponto2,10
                    lsel,s,loc,x,0,esp_dc,
                    lsel,r,loc,y,hdf
                    lsel,u,loc,x,0
                    *GET,l1,line,0,num,min
                    *GET,l2,line,0,num,max
                    ASKIN,l1,l2
                    lsel,s,loc,x,esp_dc,boca/2
                    lsel,r,loc,y,hdf
                    lsel,u,loc,x,esp_dc
                    *GET,l1,line,0,num,min
                    *GET,l2,line,0,num,max
                    ASKIN,l1,l2
                    lsel,s,loc,x,esp_dc
                    lsel,r,loc,y,hdf,pontal+aux_C_DC
                    lsel,u,loc,z,0
                    lsel,u,loc,z,secao
                    *GET,l1,line,0,num,min
                    *GET,l2,line,0,num,max
                    ASKIN,l1,l2
                *ELSE
                    l,6,3
                    ksel,s,loc,x,0
                    ksel,r,loc,y,hdf
                    *get,ponto,kp,0,num,max
                    ksel,s,kp,,all
                    l,7,ponto
                    lsel,s,loc,x,0,boca/2
                    lsel,r,loc,y,hdf
                    lsel,u,loc,x,0
                    *GET,l1,line,0,num,min
                    *GET,l2,line,0,num,max
                    ASKIN,l1,l2
                *ENDIF
            *ELSE
                *IF,esp_dc,GT,0,THEN
                    lsel,s,loc,x,esp_dc
                    *GET,l1,line,0,num,min
                    *GET,l2,line,0,num,max
                    ASKIN,l1,l2
                *ENDIF
            *ENDIF
            lsel,s,line,,all
            ldele,linha_Quilha
        !Conveses intermediários
            *IF,qnt_cm,GT,0,THEN
                *DO,contador1,1,qnt_cm,1
                    k,,boca/2,hdf+hcm*contador1,0
                    k,,boca/2,hdf+hcm*contador1,secao
                    ksel,s,loc,y,hdf+hcm*contador1
                    ksel,r,loc,x,boca/2
                    *GET,ponto1,kp,0,num,min
                    *GET,ponto2,kp,0,num,max
                    l,ponto1,ponto2
                    asel,s,loc,x,esp_dc
                    asel,r,loc,y,hdf,pontal
                    WPOFFS,esp_dc,hdf+hcm*contador1,0
                    wprota,-90,0,-90
                    asbw,all
                    lsel,s,loc,y,hdf+hcm*contador1
                    lsel,r,loc,x,esp_dc,boca/2
                    *GET,l1,line,0,num,min
                    *GET,l2,line,0,num,max
                    ASKIN,l2,l1
                    WPCSYS
                *ENDDO
            *ENDIF
        !Anteparas Longitudinais
            *IF,qnt_ant,GT,0,THEN
                espacamento_ant = (boca-2*esp_dc)/(qnt_ant+1)
                *IF,qnt_ant,EQ,1,THEN
                    !Duplo Fundo
                        *IF,hdf,GT,0,THEN
                            lsel,s,loc,x,boca/2
                            lsel,r,loc,y,-pontal,hdf
                            *GET,l1,line,0,num,min
                            *GET,l2,line,0,num,max
                            ASKIN,l1,l2
                        *ENDIF
                    !Conveses intermediários  
                        *IF,qnt_cm,gt,0,THEN    
                            *DO,contador1,1,qnt_cm,1
                                lsel,s,loc,x,boca/2
                                lsel,r,loc,y,hdf+hcm*(contador1-1),hdf+hcm*contador1
                                *GET,l1,line,0,num,min
                                *GET,l2,line,0,num,max
                                ASKIN,l1,l2
                            *ENDDO
                        *ENDIF
                    !Topo
                        lsel,s,loc,x,boca/2
                        lsel,r,loc,y,hdf+qnt_cm*hcm,pontal+auxC
                        *GET,l1,line,0,num,min
                        *GET,l2,line,0,num,max
                        ASKIN,l1,l2
                *ELSE
                    !Criando Linhas
                        asel,s,loc,x,esp_dc,boca/2  
                        asel,u,loc,x,esp_dc
                        *DO,contador1,1,qnt_ant/2,1
                            auxc2 = tan(pi*A_Camber/180)*(esp_dc+espacamento_ant*contador1)
                            WPOFFS,esp_dc+espacamento_ant*contador1,pontal+auxc2,0
                            wprota,0,0,-90
                            asbw,all
                            wpcsys
                        *ENDDO
                    !Áreas
                        *DO,contador1,1,qnt_ant/2,1
                            !Duplo Fundo
                                *IF,hdf,GT,0,THEN
                                    lsel,s,loc,x,esp_dc+espacamento_ant*contador1
                                    lsel,r,loc,y,-pontal,hdf
                                    *GET,l1,line,0,num,min
                                    *GET,l2,line,0,num,max
                                    ASKIN,l1,l2
                                *ENDIF
                            !Conveses intermediários  
                                *IF,qnt_cm,gt,0,THEN    
                                    *DO,contador2,1,qnt_cm,1
                                        lsel,s,loc,x,esp_dc+espacamento_ant*contador1
                                        lsel,r,loc,y,hdf+hcm*(contador2-1),hdf+hcm*contador2
                                        *GET,l1,line,0,num,min
                                        *GET,l2,line,0,num,max
                                        ASKIN,l1,l2
                                    *ENDDO
                                *ENDIF
                            !Topo
                                lsel,s,loc,x,esp_dc+espacamento_ant*contador1
                                lsel,r,loc,y,hdf+qnt_cm*hcm,pontal+auxD
                                *GET,l1,line,0,num,min
                                *GET,l2,line,0,num,max
                                ASKIN,l1,l2
                        *ENDDO
                        *IF,mod(qnt_ant,2),GT,0,THEN
                            !Duplo Fundo
                                *IF,hdf,GT,0,THEN
                                    lsel,s,loc,x,boca/2
                                    lsel,r,loc,y,-pontal,hdf
                                    *GET,l1,line,0,num,min
                                    *GET,l2,line,0,num,max
                                    ASKIN,l1,l2
                                *ENDIF
                            !Conveses intermediários  
                                *IF,qnt_cm,gt,0,THEN    
                                    *DO,contador1,1,qnt_cm,1
                                        lsel,s,loc,x,boca/2
                                        lsel,r,loc,y,hdf+hcm*(contador1-1),hdf+hcm*contador1
                                        *GET,l1,line,0,num,min
                                        *GET,l2,line,0,num,max
                                        ASKIN,l1,l2
                                    *ENDDO
                                *ENDIF
                            !Topo
                                lsel,s,loc,x,boca/2
                                lsel,r,loc,y,hdf+qnt_cm*hcm,pontal+auxD
                                *GET,l1,line,0,num,min
                                *GET,l2,line,0,num,max
                                ASKIN,l1,l2
                        *ENDIF
                *ENDIF
            *ENDIF
        !Tanque de Bojo
            *IF,L_TB,GT,0,THEN
                *IF,ID,NE,2,THEN
                    !Fundo  
                        asel,s,loc,y,-pontal,hdf
                        WPOFFS,L_TB,0,0
                        wprota,0,0,-90
                        asbw,all
                        lsel,s,loc,y,-pontal,0
                        lsel,r,loc,x,L_TB
                        *GET,LTB1,line,0,num,max
                        lsel,s,loc,y,hdf
                        lsel,r,loc,x,L_TB
                        *GET,LTB2,line,0,num,max
                        lsel,s,line,,all
                        ASKIN,LTB1,LTB2
                        WPCSYS
                    !Costado
                        asel,s,loc,x,0,esp_dc
                        WPOFFS,0,h_TB,0
                        wprota,-90,0,-90
                        asbw,all
                        *IF,esp_dc,GT,0,THEN
                            lsel,s,loc,x,0
                            lsel,r,loc,y,h_TB
                            *GET,LTB4,line,0,num,max
                            lsel,s,loc,x,esp_dc
                            lsel,r,loc,y,h_TB
                            *GET,LTB3,line,0,num,max
                            lsel,s,loc,y,h_TB
                            ASKIN,LTB3,LTB4
                        *ELSE
                            lsel,s,loc,x,0
                            lsel,r,loc,y,h_TB
                            *GET,LTB3,line,0,num,max
                        *ENDIF
                        wpcsys
                    !Juntando
                        lsel,s,line,,all
                        ASKIN,LTB2,LTB3
                    !Apagando areas extras
                        asel,s,loc,y,hdf
                        asel,r,loc,x,0,L_TB
                        adele,all
                        *IF,esp_dc,GT,0,THEN
                            asel,s,loc,x,esp_dc
                            asel,r,loc,y,hdf,h_TB
                            adele,all
                        *ENDIF
                    !Apagando Linhas extras
                        lsel,s,loc,y,hdf
                        lsel,r,loc,x,0,L_TB
                        lsel,u,loc,x,0
                        lsel,u,loc,x,L_TB
                        ldele,all
                        *IF,esp_dc,GT,0,THEN
                            lsel,s,loc,x,esp_dc
                            lsel,r,loc,y,hdf,h_TB
                            lsel,u,loc,y,h_TB
                            ldele,all
                        *ENDIF
                    !Apagando Pontos extras
                        *IF,esp_dc,GT,0,THEN
                            ksel,s,loc,y,hdf
                            ksel,r,loc,x,esp_dc
                            kdele,all
                        *ENDIF
                *ELSE
                    !Fundo  
                        asel,s,loc,y,-pontal,hdf
                        WPOFFS,L_TB+esp_dc,0,0
                        wprota,0,0,-90
                        asbw,all
                        lsel,s,loc,y,-pontal,0
                        lsel,r,loc,x,L_TB+esp_dc
                        *GET,LTB1,line,0,num,max
                        lsel,s,loc,y,hdf
                        lsel,r,loc,x,L_TB+esp_dc
                        *GET,LTB2,line,0,num,max
                        lsel,s,line,,all
                        ASKIN,LTB1,LTB2
                        WPCSYS
                    !Costado
                        asel,s,loc,x,0,esp_dc
                        WPOFFS,0,h_TB+hdf,0
                        wprota,-90,0,-90
                        asbw,all
                        *IF,esp_dc,GT,0,THEN
                            lsel,s,loc,x,0
                            lsel,r,loc,y,h_TB+hdf
                            *GET,LTB4,line,0,num,max
                            lsel,s,loc,x,esp_dc
                            lsel,r,loc,y,h_TB+hdf
                            *GET,LTB3,line,0,num,max
                            lsel,s,loc,y,h_TB+hdf
                            ASKIN,LTB3,LTB4
                        *ELSE
                            lsel,s,loc,x,0
                            lsel,r,loc,y,h_TB+hdf
                            *GET,LTB3,line,0,num,max
                        *ENDIF
                        wpcsys
                    !Parte Interna
                        k,1000,esp_dc+L_TB,hdf+h_TB,0
                        k,1001,esp_dc+L_TB,hdf+h_TB,secao
                        L,1000,1001
                        lsel,s,loc,y,hdf+h_TB
                        lsel,r,loc,x,esp_dc+L_TB
                        *GET,LTB5,line,0,num,max
                        lsel,s,line,,all
                        Askin,LTB2,LTB5
                        askin,LTB3,LTB5
                    !Apagando areas extras
                        asel,s,loc,y,hdf
                        asel,r,loc,x,0,L_TB+esp_dc
                        adele,all
                        *IF,esp_dc,GT,0,THEN
                            asel,s,loc,x,esp_dc
                            asel,r,loc,y,hdf,h_TB+hdf
                            adele,all
                        *ENDIF
                    !Apagando Linhas extras
                        lsel,s,loc,y,hdf
                        lsel,r,loc,x,0,L_TB+esp_dc
                        lsel,u,loc,x,0
                        lsel,u,loc,x,L_TB+esp_dc
                        ldele,all
                        *IF,esp_dc,GT,0,THEN
                            lsel,s,loc,x,esp_dc
                            lsel,r,loc,y,hdf,h_TB+hdf
                            lsel,u,loc,y,h_TB+hdf
                            ldele,all
                        *ENDIF
                    !Apagando Pontos extras
                        *IF,esp_dc,GT,0,THEN
                            ksel,s,loc,y,hdf
                            ksel,r,loc,x,esp_dc
                            kdele,all
                        *ENDIF
                *ENDIF
            *ENDIF
        !Tanque de Asa
            *IF,L_TA,GT,0,THEN
                !Inferior   
                    k,,L_TA,pontal-H_Min_TA,0
                    k,,L_TA,pontal-H_Min_TA,secao
                    ksel,s,loc,x,L_TA
                    ksel,r,loc,y,pontal-H_min_TA
                    *GET,TA1,kp,0,NUM,min
                    *GET,TA2,kp,0,num,max
                    l,TA2,TA1
                !Topo
                    asel,s,loc,y,pontal,pontal*2
                    WPOFFS,L_TA,,
                    wprota,0,0,-90
                    asbw,all
                    wpcsys
                !Lateral
                    asel,s,loc,x,0,esp_dc
                    WPOFFS,,pontal-h_max_TA,0
                    wprota,-90,0,-90
                    asbw,all
                    WPCSYS
                !Areas
                    LSEL,s,loc,x,l_TA
                    lsel,r,loc,y,pontal-h_min_TA
                    *get,L_TA1,line,0,num,max
                    LSEL,s,loc,x,l_ta
                    lsel,r,loc,y,pontal,pontal*2
                    *GET,L_TA2,line,0,num,MAX
                    lsel,s,loc,x,esp_dc
                    LSEL,r,loc,y,pontal-h_max_ta
                    *GET,L_TA3,line,0,num,max
                    *IF,esp_dc,GT,0,THEN
                        lsel,s,loc,x,0
                        lsel,r,loc,y,pontal-h_max_TA
                        *GET,L_TA4,line,0,num,max
                    *ENDIF
                    lsel,s,line,,all
                    askin,L_TA1,L_TA2
                    ASKIN,L_TA1,L_TA3
                    *IF,esp_dc,GT,0,THEN
                        ASKIN,L_TA4,L_TA3
                        asel,s,loc,x,esp_dc
                        asel,r,loc,y,pontal-H_max_TA,pontal*2
                        adele,all
                        lsel,s,loc,x,esp_dc
                        lsel,r,loc,y,pontal-H_max_TA,pontal*2
                        lsel,u,loc,y,pontal-h_max_TA
                        lsel,u,loc,y,pontal,pontal*2
                        ldel,all
                    *ENDIF
            *ENDIF
        !Escotilha de Carga
            *IF,ID,EQ,1,THEN
                AuxEC = boca/2
                asel,s,loc,y,pontal,pontal*2
                asel,r,loc,x,l_TA,AuxEC
                adele,all
                lsel,s,loc,y,pontal,pontal*2
                lsel,r,loc,x,L_TA,AuxEC
                lsel,u,loc,x,L_TA
                lsel,u,loc,x,AuxEC
                ldele,all
                ksel,s,loc,y,pontal,pontal*2
                ksel,r,loc,x,L_TA,AuxEC
                ksel,u,loc,x,L_TA
                ksel,u,loc,x,AuxEC
                kdele,all
            *ELSEIF,ID,EQ,2,THEN
                AuxEC = boca/2
                asel,s,loc,y,pontal,pontal*2
                asel,r,loc,x,esp_dc,AuxEC
                adele,all
                lsel,s,loc,y,pontal,pontal*2
                lsel,r,loc,x,esp_dc,AuxEC
                lsel,u,loc,x,esp_dc
                lsel,u,loc,x,AuxEC
                ldele,all
                ksel,s,loc,y,pontal,pontal*2
                ksel,r,loc,x,esp_dc,AuxEC
                ksel,u,loc,x,esp_dc
                ksel,u,loc,x,AuxEC
                kdele,all
            *ENDIF
        !Seções
            nsec=1
            !CP
                SECTYPE,nsec,SHELL
                SECDATA,Chapa_CP,1,,,'chapa CP'
                SECOFFSET,mid
                nsec=nsec+1
            !DC
                SECTYPE,nsec,SHELL
                SECDATA,Chapa_DC,1,,,'chapa DC'
                SECOFFSET,MID
                nsec=nsec+1
            !Fundo
                SECTYPE,nsec,SHELL
                SECDATA,Chapa_Fundo,1,,,'chapa Fundo'
                SECOFFSET,MID
                nsec=nsec+1
            !CM
                *IF,qnt_cm,GT,0,THEN
                    SECTYPE,nsec,SHELL
                    SECDATA,Chapa_cm,1,,,'chapa cm'
                    SECOFFSET,MID
                    nsec=nsec+1
                *ENDIF
            !Ant
                *IF,qnt_ant,GT,0,THEN
                    *IF,MOD(qnt_ant,2),GT,0,THEN
                        SECTYPE,nsec,SHELL
                        SECDATA,Chapa_ant/2,1,,,'chapa ant_Sym'
                        SECOFFSET,MID
                        nsec=nsec+1
                    *ENDIF
                *ENDIF
            !TDF
                *IF,hdf,GT,0,THEN
                    SECTYPE,nsec,SHELL
                    SECDATA,Chapa_TDF,1,,,'chapa TDF'
                    SECOFFSET,MID
                    nsec=nsec+1
                *ENDIF
    !Modelagem Viga
        !Elemento
            et,2,BEAM189
            WPCSYS
            nref=1 
        !Correção caso não tenha Anteparas
            *IF,qnt_ant,EQ,0,THEN
                espacamento_ant = boca-2*esp_dc 
            *ENDIF
        !Reforçadores Conveses intermediários
            *IF,qnt_cm,GT,0,THEN
                !Pesados
                    *IF,qnt_RP_CM,GT,0,THEN
                        espacamento_RP_CM = espacamento_ant/(qnt_rp_CM+1)
                        *IF,qnt_ant,EQ,0,THEN
                            !Reforçadores comuns
                                asel,s,loc,x,esp_dc,boca/2
                                asel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                *DO,contador1,1,qnt_RP_CM/2,1
                                    WPOFFS,esp_dc+espacamento_RP_CM*contador1,0,0
                                    wprota,0,0,-90
                                    asbw,all
                                    csys,wp
                                    k,5000+nref,0,pontal*1.5,0
                                    nref=nref+1
                                    csys,0
                                    WPCSYS
                                *ENDDO
                            !Reforçadores Plano de Simetria
                                *IF,mod(qnt_RP_CM,2),GT,0,THEN
                                    k,5000+nref,boca/2,pontal*1.5,0
                                    nref=nref+1
                                *ENDIF
                        *ELSE
                            !Reforçadores comuns
                                *DO,contador1,1,(qnt_ant+1)/2,1
                                    asel,s,loc,x,esp_dc+(contador1-1)*espacamento_ant,esp_dc+contador1*espacamento_ant
                                    asel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                    *DO,contador2,1,qnt_rp_CM,1
                                        WPOFFS,esp_dc+espacamento_ant*(contador1-1)+espacamento_RP_CM*contador2,0,0
                                        wprota,0,0,-90
                                        asbw,all
                                        csys,wp
                                        k,5000+nref,0,pontal*1.5,0
                                        nref=nref+1
                                        csys,0
                                        WPCSYS
                                    *ENDDO
                                *ENDDO
                            !Reforçadores plano de Simetria
                                *IF,mod(qnt_ant,2),EQ,0,THEN
                                    asel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2,boca/2
                                    asel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                    *DO,contador1,1,qnt_RP_CM/2,1
                                        WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CM*contador1,0,0
                                        wprota,0,0,-90
                                        asbw,all
                                        csys,wp
                                        k,5000+nref,0,pontal*1.5,0
                                        nref=nref+1
                                        csys,0
                                        WPCSYS
                                    *ENDDO
                                    *IF,mod(qnt_RP_CM,2),GT,0,THEN
                                        k,5000+nref,boca/2,pontal*1.5,0
                                        nref=nref+1
                                    *ENDIF
                                *ENDIF
                        *ENDIF
                    *ENDIF
                !Leves
                    *IF,qnt_RL_CM,GT,0,THEN
                        *IF,qnt_RP_CM,gt,0,THEN
                            espacamento_RL_CM = espacamento_RP_CM/(qnt_RL_CM+1) 
                            *IF,qnt_ant,EQ,0,THEN
                                !Reforçadores Comuns
                                    *DO,contador1,1,(qnt_RP_CM+1)/2,1
                                        asel,s,loc,x,esp_dc+(contador1-1)*espacamento_RP_CM,esp_dc+contador1*espacamento_RP_CM
                                        asel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                        *DO,contador2,1,qnt_RL_CM,1
                                            WPOFFS,esp_dc+espacamento_RP_CM*(contador1-1)+espacamento_RL_CM*contador2,0,0
                                            wprota,0,0,-90
                                            asbw,all
                                            csys,wp
                                            k,5000+nref,0,pontal*1.5,0
                                            nref=nref+1
                                            csys,0
                                            WPCSYS
                                        *ENDDO
                                    *ENDDO
                                !Reforçadores Plano de Simetria
                                    *IF,mod(qnt_RP_CM,2),EQ,0,THEN
                                        asel,s,loc,x,espacamento_RP_CM*qnt_RP_CM/2,boca/2
                                        asel,r,loc,y,hdf+hcm,hdf+hcm*qnt_CM
                                        *DO,contador1,1,qnt_RL_CM/2
                                            WPOFFS,esp_dc+espacamento_RP_CM*qnt_RP_CM/2+contador1*espacamento_RL_CM,0,0
                                            wprota,0,0,-90
                                            asbw,all
                                            csys,wp
                                            k,5000+nref,0,pontal*1.5,0
                                            nref=nref+1
                                            csys,0
                                            WPCSYS
                                        *ENDDO
                                        *IF,MOD(qnt_RL_CM,2),GT,0,THEN
                                            k,5000+nref,boca/2,pontal*1.5,0
                                            nref=nref+1
                                        *ENDIF
                                    *ENDIF
                            *ELSE
                                !Reforçadores Comuns
                                    *DO,contador1,1,(qnt_ant+1)/2,1
                                        *DO,contador2,1,qnt_RP_CM+1,1
                                            asel,s,loc,x,esp_dc+(contador1-1)*espacamento_ant+(contador2-1)*espacamento_RP_CM,esp_dc+espacamento_ant*(contador1-1)+espacamento_RP_CM*contador2
                                            asel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                            *DO,contador3,1,qnt_RL_CM,1
                                                WPOFFS,esp_dc+(contador1-1)*espacamento_ant+(contador2-1)*espacamento_RP_CM+espacamento_RL_CM*contador3
                                                wprota,0,0,-90
                                                asbw,all
                                                csys,wp
                                                k,5000+nref,0,pontal*1.5,0
                                                nref=nref+1
                                                csys,0
                                                WPCSYS
                                            *ENDDO
                                        *ENDDO
                                    *ENDDO
                                !Reforçadores Plano de Simetria
                                    *IF,MOD(qnt_ant,2),EQ,0,THEN
                                        *DO,contador1,1,(qnt_RP_CM+1)/2,1
                                            asel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CM*(contador1-1),esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CM*contador1
                                            asel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                            *DO,contador2,1,qnt_RL_CM,1
                                                WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CM*(contador1-1)+espacamento_RL_CM*contador2,0,0
                                                wprota,0,0,-90
                                                asbw,all
                                                csys,wp
                                                k,5000+nref,0,pontal*1.5,0
                                                nref=nref+1
                                                csys,0
                                                WPCSYS
                                            *ENDDO
                                        *ENDDO
                                        *IF,MOD(qnt_RP_CM,2),EQ,0,THEN
                                            asel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CM*qnt_RP_CM/2,boca/2
                                            asel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                            *DO,contador1,1,qnt_RL_CM/2,1
                                                WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CM*qnt_RP_CM/2+espacamento_RL_CM*contador1,0,0
                                                wprota,0,0,-90
                                                asbw,all
                                                csys,wp
                                                k,5000+nref,0,pontal*1.5,0
                                                nref=nref+1
                                                csys,0
                                                WPCSYS
                                            *ENDDO
                                            *IF,MOD(qnt_RL_CM,2),GT,0,THEN,
                                                k,5000+nref,boca/2,pontal*1.5,0
                                                nref=nref+1
                                            *ENDIF
                                        *ENDIF
                                    *ENDIF
                            *ENDIF
                        *ELSE
                            espacamento_RL_CM = espacamento_ant/(qnt_RL_CM+1)
                            *IF,qnt_ant,EQ,0,THEN
                                !Reforçadores comuns
                                    asel,s,loc,x,esp_dc,boca/2
                                    asel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                    *DO,contador1,1,qnt_RL_CM/2,1
                                        WPOFFS,esp_dc+espacamento_RL_CM*contador1,0,0
                                        wprota,0,0,-90
                                        asbw,all
                                        csys,wp
                                        k,5000+nref,0,pontal*1.5,0
                                        nref=nref+1
                                        csys,0
                                        WPCSYS
                                    *ENDDO
                                !Reforçadores Plano de Simetria
                                    *IF,mod(qnt_RL_CM,2),GT,0,THEN
                                        k,5000+nref,boca/2,pontal*1.5,0
                                        nref=nref+1
                                    *ENDIF
                            *ELSE
                                !Reforçadores comuns
                                    *DO,contador1,1,(qnt_ant+1)/2,1
                                        asel,s,loc,x,esp_dc+(contador1-1)*espacamento_ant,esp_dc+contador1*espacamento_ant
                                        asel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                        *DO,contador2,1,qnt_RL_CM,1
                                            WPOFFS,esp_dc+espacamento_ant*(contador1-1)+espacamento_RL_CM*contador2,0,0
                                            wprota,0,0,-90
                                            asbw,all
                                            csys,wp
                                            k,5000+nref,0,pontal*1.5,0
                                            nref=nref+1
                                            csys,0
                                            WPCSYS
                                        *ENDDO
                                    *ENDDO
                                !Reforçadores plano de Simetria
                                    *IF,mod(qnt_ant,2),EQ,0,THEN
                                        asel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2,boca/2
                                        asel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                        *DO,contador1,1,qnt_RL_CM/2,1
                                            WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RL_CM*contador1,0,0
                                            wprota,0,0,-90
                                            asbw,all
                                            csys,wp
                                            k,5000+nref,0,pontal*1.5,0
                                            nref=nref+1
                                            csys,0
                                            WPCSYS
                                        *ENDDO
                                        *IF,mod(qnt_RL_CM,2),GT,0,THEN
                                            k,5000+nref,boca/2,pontal*1.5,0
                                            nref=nref+1
                                        *ENDIF
                                    *ENDIF
                            *ENDIF        
                        *ENDIF
                    *ENDIF
                !Seções
                    !Reforçador Pesado
                        *IF,qnt_RP_CM,GT,0,THEN
                            *IF,Tipo_RP_CM,EQ,1,THEN
                                SECTYPE,nsec,BEAM,T
                            *ELSEIF,Tipo_RP_CM,EQ,2,THEN
                                SECTYPE,nsec,BEAM,L
                            *ENDIF
                            SECDATA,RP_CM_W1,RP_CM_W2,RP_CM_T1,RP_CM_T2
                            SECOFFSET,USER,0,RP_CM_W2-RP_CM_T1/2+Chapa_CM/2
                            nsec=nsec+1
                            *IF,MOD(qnt_ant,2),eq,0,AND,MOD(qnt_RP_CM,2),gt,0,THEN
                                SECTYPE,nsec,BEAM,L
                                SECDATA,RP_CM_W1/2,RP_CM_W2,RP_CM_T1,RP_CM_T2/2
                                SECOFFSET,USER,0,RP_CM_W2-RP_CM_T1/2+Chapa_CM/2
                                nsec=nsec+1
                            *ENDIF
                        *ENDIF
                    !Reforçador Leve
                        *IF,qnt_RL_CM,GT,0,THEN
                            *IF,Tipo_RL_CM,EQ,1,THEN
                                SECTYPE,nsec,BEAM,T
                            *ELSEIF,Tipo_RL_CM,EQ,2,THEN
                                SECTYPE,nsec,BEAM,L
                            *ENDIF
                            SECDATA,RL_CM_W1,RL_CM_W2,RL_CM_T1,RL_CM_T2
                            SECOFFSET,USER,0,RL_CM_W2-RL_CM_T1/2+Chapa_CM/2
                            nsec=nsec+1
                            *IF,MOD(qnt_ant,2),eq,0,AND,MOD(qnt_RP_CM,2),eq,0,THEN
                                *IF,MOD(qnt_RL_CM,2),GT,0,THEN
                                    SECTYPE,nsec,BEAM,L
                                    SECDATA,RL_CM_W1-RL_CM_T2/2,RL_CM_W2,RL_CM_T1,RL_CM_T2/2
                                    SECOFFSET,USER,0,RL_CM_W2-RL_CM_T1/2+Chapa_CM/2
                                    nsec=nsec+1
                                *ENDIF
                            *ENDIF
                        *ENDIF 
            *ENDIF
        !Reforçadores Convés Principal  
            *IF,ID,GE,3,THEN
                !Pesados
                    *IF,qnt_RP_CP,GT,0,THEN
                        espacamento_RP_CP = espacamento_ant/(qnt_rp_CP+1)
                        *IF,qnt_ant,EQ,0,THEN
                            !Reforçadores comuns
                                asel,s,loc,x,esp_dc,boca/2
                                asel,r,loc,y,pontal,pontal*2
                                *DO,contador1,1,qnt_RP_CP/2,1
                                    aux_RP_CP = sin(pi*A_Camber/180)*(esp_dc+espacamento_RP_CP*contador1)
                                    WPOFFS,esp_dc+espacamento_RP_CP*contador1,pontal+aux_RP_CP,0
                                    wprota,0,0,-90
                                    asbw,all
                                    csys,wp
                                    k,5000+nref,0,pontal*1.5,0
                                    nref=nref+1
                                    csys,0
                                    WPCSYS
                                *ENDDO
                            !Reforçadores Plano de Simetria
                                *IF,mod(qnt_RP_CP,2),GT,0,THEN
                                    k,5000+nref,boca/2,pontal*1.5,0
                                    nref=nref+1
                                *ENDIF
                        *ELSE
                            !Reforçadores comuns
                                *DO,contador1,1,(qnt_ant+1)/2,1
                                    asel,s,loc,x,esp_dc+(contador1-1)*espacamento_ant,esp_dc+contador1*espacamento_ant
                                    asel,r,loc,y,pontal,pontal*2
                                    *DO,contador2,1,qnt_rp_CP,1
                                        aux_RP_CP = sin(pi*A_Camber/180)*(esp_dc+espacamento_ant*(contador1-1)+espacamento_RP_CP*contador2)
                                        WPOFFS,esp_dc+espacamento_ant*(contador1-1)+espacamento_RP_CP*contador2,pontal+aux_RP_CP,0
                                        wprota,0,0,-90
                                        asbw,all
                                        csys,wp
                                        k,5000+nref,0,pontal*1.5,0
                                        nref=nref+1
                                        csys,0
                                        WPCSYS
                                    *ENDDO
                                *ENDDO
                            !Reforçadores plano de Simetria
                                *IF,mod(qnt_ant,2),EQ,0,THEN
                                    asel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2,boca/2
                                    asel,r,loc,y,pontal,pontal*2
                                    *DO,contador1,1,qnt_RP_CP/2,1
                                        aux_RP_CP = sin(pi*A_Camber/180)*(esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CP*contador1)
                                        WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CP*contador1,pontal+aux_RP_CP,0
                                        wprota,0,0,-90
                                        asbw,all
                                        csys,wp
                                        k,5000+nref,0,pontal*1.5,0
                                        nref=nref+1
                                        csys,0
                                        WPCSYS
                                    *ENDDO
                                    *IF,mod(qnt_RP_CP,2),GT,0,THEN
                                        k,5000+nref,boca/2,pontal*1.5,0
                                        nref=nref+1
                                    *ENDIF
                                *ENDIF
                        *ENDIF
                    *ENDIF
                !Leves
                    *IF,qnt_RL_CP,GT,0,THEN
                        *IF,qnt_RP_CP,gt,0,THEN
                            espacamento_RL_CP = espacamento_RP_CP/(qnt_RL_CP+1) 
                            *IF,qnt_ant,EQ,0,THEN
                                !Reforçadores Comuns
                                    *DO,contador1,1,(qnt_RP_CP+1)/2,1
                                        asel,s,loc,x,esp_dc+(contador1-1)*espacamento_RP_CP,esp_dc+contador1*espacamento_RP_CP
                                        asel,r,loc,y,pontal,pontal*2
                                        *DO,contador2,1,qnt_RL_CP,1
                                            aux_RP_CL = sin(pi*A_Camber/180)*(esp_dc+espacamento_RP_CP*(contador1-1))
                                            WPOFFS,esp_dc+espacamento_RP_CP*(contador1-1)+espacamento_RL_CP*contador2,pontal+aux_RL_CP,0
                                            wprota,0,0,-90
                                            asbw,all
                                            csys,wp
                                            k,5000+nref,0,pontal*1.5,0
                                            nref=nref+1
                                            csys,0
                                            WPCSYS
                                        *ENDDO
                                    *ENDDO
                                !Reforçadores Plano de Simetria
                                    *IF,mod(qnt_RP_CP,2),EQ,0,THEN
                                        asel,s,loc,x,espacamento_RP_CP*qnt_RP_CP/2,boca/2
                                        asel,r,loc,y,pontal,pontal*2
                                        *DO,contador1,1,qnt_RL_CP/2
                                            aux_RP_CL = sin(pi*A_Camber/180)*(esp_dc+espacamento_RP_CP*qnt_RP_CP/2+contador1*espacamento_RL_CP)
                                            WPOFFS,esp_dc+espacamento_RP_CP*qnt_RP_CP/2+contador1*espacamento_RL_CP,pontal+aux_RL_CP,0
                                            wprota,0,0,-90
                                            asbw,all
                                            csys,wp
                                            k,5000+nref,0,pontal*1.5,0
                                            nref=nref+1
                                            csys,0
                                            WPCSYS
                                        *ENDDO
                                        *IF,MOD(qnt_RL_CP,2),GT,0,THEN
                                            k,5000+nref,boca/2,pontal*1.5,0
                                            nref=nref+1
                                        *ENDIF
                                    *ENDIF
                            *ELSE
                                !Reforçadores Comuns
                                    *DO,contador1,1,(qnt_ant+1)/2,1
                                        *DO,contador2,1,qnt_RP_CP+1,1
                                            asel,s,loc,x,esp_dc+(contador1-1)*espacamento_ant+(contador2-1)*espacamento_RP_CP,esp_dc+espacamento_ant*(contador1-1)+espacamento_RP_CP*contador2
                                            asel,r,loc,y,pontal,pontal*2
                                            *DO,contador3,1,qnt_RL_CP,1
                                                aux_RP_CL = sin(pi*A_Camber/180)*(esp_dc+(contador1-1)*espacamento_ant+(contador2-1)*espacamento_RP_CP+espacamento_RL_CP*contador3)
                                                WPOFFS,esp_dc+(contador1-1)*espacamento_ant+(contador2-1)*espacamento_RP_CP+espacamento_RL_CP*contador3,pontal+aux_RL_CP,0
                                                wprota,0,0,-90
                                                asbw,all
                                                csys,wp
                                                k,5000+nref,0,pontal*1.5,0
                                                nref=nref+1
                                                csys,0
                                                WPCSYS
                                            *ENDDO
                                        *ENDDO
                                    *ENDDO
                                !Reforçadores Plano de Simetria
                                    *IF,MOD(qnt_ant,2),EQ,0,THEN
                                        *DO,contador1,1,(qnt_RP_CP+1)/2,1
                                            asel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CP*(contador1-1),esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CP*contador1
                                            asel,r,loc,y,pontal,pontal*2
                                            *DO,contador2,1,qnt_RL_CP,1
                                                aux_RP_CL = sin(pi*A_Camber/180)*(esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CP*(contador1-1)+espacamento_RL_CP*contador2)
                                                WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CP*(contador1-1)+espacamento_RL_CP*contador2,pontal+aux_RL_CP,0
                                                wprota,0,0,-90
                                                asbw,all
                                                csys,wp
                                                k,5000+nref,0,pontal*1.5,0
                                                nref=nref+1
                                                csys,0
                                                WPCSYS
                                            *ENDDO
                                        *ENDDO
                                        *IF,MOD(qnt_RP_CP,2),EQ,0,THEN
                                            asel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CP*qnt_RP_CP/2,boca/2
                                            asel,r,loc,y,pontal,pontal*2
                                            *DO,contador1,1,qnt_RL_CP/2,1
                                                aux_RP_CL = sin(pi*A_Camber/180)*(esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CP*qnt_RP_CP/2+espacamento_RL_CP*contador1)
                                                WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CP*qnt_RP_CP/2+espacamento_RL_CP*contador1,pontal+aux_RL_CP,0
                                                wprota,0,0,-90
                                                asbw,all
                                                csys,wp
                                                k,5000+nref,0,pontal*1.5,0
                                                nref=nref+1
                                                csys,0
                                                WPCSYS
                                            *ENDDO
                                            *IF,MOD(qnt_RL_CP,2),GT,0,THEN,
                                                k,5000+nref,boca/2,pontal*1.5,0
                                                nref=nref+1
                                            *ENDIF
                                        *ENDIF
                                    *ENDIF
                            *ENDIF
                        *ELSE
                            espacamento_RL_CP = espacamento_ant/(qnt_RL_CP+1)
                            *IF,qnt_ant,EQ,0,THEN
                                !Reforçadores comuns
                                    asel,s,loc,x,esp_dc,boca/2
                                    asel,r,loc,y,pontal,pontal*2
                                    *DO,contador1,1,qnt_RL_CP/2,1
                                        aux_RL_CP = sin(pi*A_Camber/180)*(esp_dc+espacamento_RL_CP*contador1)
                                        WPOFFS,esp_dc+espacamento_RL_CP*contador1,pontal+aux_RL_CP,0
                                        wprota,0,0,-90
                                        asbw,all
                                        csys,wp
                                        k,5000+nref,0,pontal*1.5,0
                                        nref=nref+1
                                        csys,0
                                        WPCSYS
                                    *ENDDO
                                !Reforçadores Plano de Simetria
                                    *IF,mod(qnt_RL_CP,2),GT,0,THEN
                                        k,5000+nref,boca/2,pontal*1.5,0
                                        nref=nref+1
                                    *ENDIF
                            *ELSE
                                !Reforçadores comuns
                                    *DO,contador1,1,(qnt_ant+1)/2,1
                                        asel,s,loc,x,esp_dc+(contador1-1)*espacamento_ant,esp_dc+contador1*espacamento_ant
                                        asel,r,loc,y,pontal,pontal*2
                                        *DO,contador2,1,qnt_RL_CP,1
                                            aux_RL_CP = sin(pi*A_Camber/180)*(esp_dc+espacamento_ant*(contador1-1)+espacamento_RL_CP*contador2)
                                            WPOFFS,esp_dc+espacamento_ant*(contador1-1)+espacamento_RL_CP*contador2,pontal+aux_RL_CP,0
                                            wprota,0,0,-90
                                            asbw,all
                                            csys,wp
                                            k,5000+nref,0,pontal*1.5,0
                                            nref=nref+1
                                            csys,0
                                            WPCSYS
                                        *ENDDO
                                    *ENDDO
                                !Reforçadores plano de Simetria
                                    *IF,mod(qnt_ant,2),EQ,0,THEN
                                        asel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2,boca/2
                                        asel,r,loc,y,pontal,pontal*2
                                        *DO,contador1,1,qnt_RL_CP/2,1
                                            aux_RL_CP = sin(pi*A_Camber/180)*(esp_dc+espacamento_ant*qnt_ant/2+espacamento_RL_CP*contador1)
                                            WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RL_CP*contador1,pontal+aux_RL_CP,0
                                            wprota,0,0,-90
                                            asbw,all
                                            csys,wp
                                            k,5000+nref,0,pontal*1.5,0
                                            nref=nref+1
                                            csys,0
                                            WPCSYS
                                        *ENDDO
                                        *IF,mod(qnt_RL_CP,2),GT,0,THEN
                                            k,5000+nref,boca/2,pontal*1.5,0
                                            nref=nref+1
                                        *ENDIF
                                    *ENDIF
                            *ENDIF        
                        *ENDIF
                    *ENDIF
                !Seções
                    !Reforçador Pesado
                        *IF,qnt_RP_CP,GT,0,THEN
                            SECTYPE,nsec,BEAM,T
                            SECDATA,W1_RP_CP,W2_RP_CP,T1_RP_CP,T2_RP_CP
                            SECOFFSET,USER,0,W2_RP_CP-T1_RP_CP/2+chapa_CP/2
                            nsec=nsec+1
                            *IF,MOD(qnt_ant,2),eq,0,AND,MOD(qnt_RP_CP,2),gt,0,THEN
                                SECTYPE,nsec,BEAM,L
                                SECDATA,W1_RP_CP-T2_RP_CP/2,W2_RP_CP,T1_RP_CP,T2_RP_CP/2
                                SECOFFSET,USER,0,W2_RP_CP-T1_RP_CP/2+Chapa_CP/2
                                nsec=nsec+1
                            *ENDIF
                        *ENDIF
                    !Reforçador Leve
                        *IF,qnt_RL_CP,GT,0,THEN
                            SECTYPE,nsec,BEAM,L
                            SECDATA,W1_RL_CP,W2_RL_CP,T1_RL_CP,T2_RL_CP
                            SECOFFSET,USER,0,W2_RL_CP-T1_RL_CP/2+Chapa_CP/2
                            nsec=nsec+1
                            *IF,MOD(qnt_ant,2),eq,0,AND,MOD(qnt_RP_CP,2),eq,0,THEN
                                *IF,MOD(qnt_RL_CP,2),GT,0,THEN
                                    SECTYPE,nsec,BEAM,L
                                    SECDATA,W1_RL_CP-T2_RL_CP/2,W2_RL_CP,T1_RL_CP,T2_RL_CP/2
                                    SECOFFSET,USER,0,W2_RL_CP-T1_RL_CP/2+Chapa_CP/2
                                    nsec=nsec+1
                                *ENDIF
                            *ENDIF
                        *ENDIF 
            *ENDIF
        !Reforçadores Costado
            *IF,esp_dc,GT,0,THEN
                *IF,h_TB,GT,hdf,THEN
                    *IF,Id,EQ,2,THEN
                        h_cst = h_TB+hdf
                    *ELSE 
                        h_cst = h_TB
                    *ENDIF    
                *ELSE
                    h_cst = hdf
                *ENDIF
                !Pesados
                    *IF,qnt_RP_DC,GT,0,THEN
                        *IF,Tipo_RP_DC,EQ,1,THEN
                            asel,s,loc,x,0 
                            asel,r,loc,y,h_cst,pontal-h_max_TA
                            WPOFFS,0,h_cst,0
                            WPROTA,-90,0,-90
                            espacamento_RP_DC=(pontal-h_max_TA-h_cst)/(qnt_RP_DC+1)
                            *DO,contador1,1,qnt_RP_DC,1
                                WPOFFS,0,0,espacamento_RP_DC
                                ASBW,all
                                CSYS,wp
                                k,5000+nref,0,-pontal-h_max_TA,0
                                nref=nref+1
                                csys,0
                            *ENDDO
                            WPCSYS
                        *ELSE
                            asel,s,loc,x,0 
                            asel,r,loc,y,h_cst,pontal-h_max_TA
                            WPOFFS,0,h_cst,0
                            WPROTA,-90,0,-90
                            espacamento_RP_DC=(pontal-h_max_TA-h_cst)/(qnt_RP_DC+1)
                            *DO,contador1,1,qnt_RP_DC,1
                                WPOFFS,0,0,espacamento_RP_DC
                                ASBW,all
                            *ENDDO
                            WPCSYS
                        *ENDIF
                    *ENDIF
                !Leves
                    *IF,qnt_RL_DC,GT,0,THEN
                        *IF,qnt_RP_DC,GT,0,THEN
                            espacamento_RL_DC=espacamento_RP_DC/(qnt_RL_DC+1)
                            *DO,contador1,1,qnt_RP_DC+1,1
                                asel,s,loc,x,0
                                asel,r,loc,y,h_cst+espacamento_RP_DC*(contador1-1),h_cst+espacamento_RP_DC*contador1
                                WPOFFS,0,h_cst+espacamento_RP_DC*(contador1-1),0
                                WPROTA,-90,0,-90
                                *DO,contador2,1,qnt_RL_DC,1
                                    WPOFFS,0,0,espacamento_RL_DC
                                    ASBW,all
                                    CSYS,wp
                                    k,5000+nref,0,-pontal-h_max_TA,0
                                    nref=nref+1
                                    CSYS,0
                                *ENDDO
                                WPCSYS
                            *ENDDO
                        *ELSE
                            espacamento_RL_DC=(pontal-h_max_TA-hdf)/(qnt_RL_DC+1)
                            asel,s,loc,x,0 
                            asel,r,loc,y,h_cst,pontal-h_max_TA
                            WPOFFS,0,h_cst,0
                            WPROTA,-90,0,-90
                            *DO,contador1,1,qnt_RL_DC,1
                                WPOFFS,0,0,espacamento_RL_DC
                                ASBW,all
                                CSYS,wp
                                k,5000+nref,0,-pontal-h_max_TA,0
                                nref=nref+1
                                csys,0
                            *ENDDO
                            WPCSYS
                        *ENDIF
                    *ENDIF
                !Seções
                    !Reforçador Pesado
                        *IF,qnt_RP_DC,GT,0,AND,Tipo_RP_DC,EQ,1,THEN
                            SECTYPE,nsec,BEAM,T
                            SECDATA,W1_RP_DC,W2_RP_DC,T1_RP_DC,T2_RP_DC
                            SECOFFSET,USER,0,W2_RP_DC-T1_RP_DC/2+Chapa_DC/2
                            nsec=nsec+1
                        *ENDIF
                    !Reforçador Leve
                        *IF,qnt_RL_DC,gt,0,THEN
                            SECTYPE,nsec,BEAM,L
                            SECDATA,W1_RL_DC,W2_RL_DC,T1_RL_DC,T2_RL_DC
                            SECOFFSET,USER,0,W2_RL_DC-T1_RL_DC/2+Chapa_DC/2
                            nsec=nsec+1
                        *ENDIF
            *ENDIF
        !Reforçadores Duplo Costado
            *IF,esp_dc,GT,0,THEN
                AuxC = sin(pi*A_Camber/180)*(esp_dc)
                *IF,h_TB,GT,hdf,THEN
                    *IF,Id,EQ,2,THEN
                        h_dcst = h_TB+hdf
                    *ELSE
                        h_dcst = h_TB
                    *ENDIF
                *ELSE
                    h_dcst = hdf
                *ENDIF
                !Pesados
                    *IF,qnt_RP_DC,GT,0,THEN
                        *IF,Tipo_RP_DC,EQ,1,THEN
                            asel,s,loc,x,esp_dc
                            asel,r,loc,y,h_dcst,pontal-h_max_TA+AuxC  
                            espacamento_RP_DC = (pontal-h_max_TA-h_dcst)/(qnt_RP_DC+1)
                            WPOFFS,esp_dc,h_dcst,0
                            wprota,-90,0,-90
                            *DO,contador1,1,qnt_RP_DC,1
                                WPOFFS,0,0,espacamento_RP_DC
                                asbw,all
                                CSYS,wp
                                k,5000+nref,0,boca+pontal-h_max_TA/2,0
                                nref=nref+1
                                csys,0
                            *ENDDO
                            WPCSYS
                        *ELSE
                            asel,s,loc,x,esp_dc
                            asel,r,loc,y,h_dcst,pontal-h_max_TA+AuxC  
                            espacamento_RP_DC = (pontal-h_max_TA-h_dcst)/(qnt_RP_DC+1)
                            WPOFFS,esp_dc,h_dcst,0
                            wprota,-90,0,-90
                            *DO,contador1,1,qnt_RP_DC,1
                                WPOFFS,0,0,espacamento_RP_DC
                                asbw,all
                            *ENDDO
                            WPCSYS
                        *ENDIF
                    *ENDIF
                !Leves
                    *IF,qnt_RL_DC,GT,0,THEN
                        *IF,qnt_RP_DC,GT,0,THEN
                            espacamento_RL_DC = espacamento_RP_DC/(qnt_RL_DC+1)
                            *DO,contador1,1,qnt_RP_DC+1,1
                                asel,s,loc,x,esp_dc
                                asel,r,loc,y,h_dcst+espacamento_RP_DC*(contador1-1),h_dcst+espacamento_RP_DC*contador1
                                WPOFFS,esp_dc,h_dcst+espacamento_RP_DC*(contador1-1),0
                                wprota,-90,0,-90
                                *DO,contador2,1,qnt_RL_DC,1
                                    WPOFFS,0,0,espacamento_RL_DC
                                    asbw,all
                                    csys,wp
                                    k,5000+nref,0,boca+pontal-h_max_TA/2,0
                                    nref=nref+1
                                    csys,0
                                *ENDDO
                                WPCSYS
                            *ENDDO
                        *ELSE
                            espacamento_RL_DC = (pontal-h_max_TA-h_dcst)/(qnt_RL_DC+1)
                            asel,s,loc,x,esp_dc
                            asel,r,loc,y,h_dcst,pontal-h_max_TA+auxC
                            WPOFFS,esp_dc,h_dcst,0
                            wprota,-90,0,-90
                            *DO,contador1,1,qnt_RL_DC,1
                                WPOFFS,0,0,espacamento_RL_DC
                                asbw,all
                                csys,wp 
                                k,5000+nref,0,pontal-h_max_TA,0
                                nref=nref+1
                                csys,0
                            *ENDDO
                            WPCSYS
                        *ENDIF
                    *ENDIF
                !Seções
                    !Reforçador Pesado
                        *IF,qnt_RP_DC,GT,0,AND,Tipo_RP_DC,EQ,1,THEN
                            SECTYPE,nsec,BEAM,T
                            SECDATA,W1_RP_DC,W2_RP_DC,T1_RP_DC,T2_RP_DC
                            SECOFFSET,USER,0,W2_RP_DC-T1_RP_DC/2+Chapa_DC/2
                            nsec=nsec+1
                        *ENDIF
                    !Reforçador Leve
                        *IF,qnt_RL_DC,GT,0,THEN
                            SECTYPE,nsec,BEAM,L
                            SECDATA,W1_RL_DC,W2_RL_DC,T1_RL_DC,T2_RL_DC
                            SECOFFSET,USER,0,W2_RL_DC-T1_RL_DC/2+Chapa_DC/2
                            nsec=nsec+1
                        *ENDIF
            *ENDIF
        !Reforçadores T2 DC
            *IF,esp_dc,GT,0,THEN
                *IF,qnt_RP_DC,GT,0,AND,Tipo_RP_DC,EQ,2,THEN
                    *DO,contador1,1,qnt_RP_DC,1
                        lsel,s,loc,y,h_cst+(contador1)*espacamento_RP_DC
                        lsel,r,loc,x,0
                        *GET,DCRP1,line,0,num,max
                        lsel,s,loc,y,h_cst+(contador1)*espacamento_RP_DC
                        lsel,r,loc,x,esp_dc
                        *GET,DCRP2,line,0,num,max
                        lsel,s,line,,all
                        ASKIN,DCRP2,DCRP1
                    *ENDDO
                    !Seção
                        SECTYPE,nsec,SHELL
                        SECDATA,chapa_T2_DC,1,,,'chapa DC'
                        SECOFFSET,MID
                        nsec=nsec+1
                *ENDIF
            *ENDIF 
        !Reforçadores Teto Duplo Fundo
            *IF,hdf,GT,0,THEN
                *IF,L_TB,GT,0,THEN
                    *IF,ID,EQ,2,THEN
                        espacamento_aux_DF = L_TB+esp_dc
                    *ELSE
                        espacamento_aux_DF = L_TB
                    *ENDIF
                *ELSE
                    espacamento_aux_DF = xbojo
                *ENDIF
                !Pesados
                    *IF,qnt_RP_DF,GT,0,THEN
                        *IF,Tipo_RP_DF,EQ,1,THEN
                            *IF,qnt_ant,EQ,0,THEN
                                espacamento_RP_DF = (boca-2*espacamento_aux_DF)/(qnt_RP_DF+1)
                                !Reforçadores comuns
                                    asel,s,loc,x,espacamento_aux_DF,boca/2
                                    asel,r,loc,y,hdf
                                    *DO,contador1,1,qnt_RP_DF/2,1
                                        WPOFFS,espacamento_aux_DF+espacamento_RP_DF*contador1,hdf,0
                                        wprota,0,0,-90
                                        asbw,all
                                        csys,wp
                                        k,5000+nref,0,pontal*1.5,0
                                        nref=nref+1
                                        csys,0
                                        WPCSYS
                                    *ENDDO
                                !Reforçadores Plano de Simetria
                                    *IF,mod(qnt_RP_DF,2),GT,0,THEN
                                        k,5000+nref,boca/2,pontal*1.5,0
                                        nref=nref+1
                                    *ENDIF
                            *ELSE
                                !Reforçadores comuns
                                    espacamento_RP_TTB = (espacamento_ant+esp_dc-espacamento_aux_DF)/(qnt_RP_DF+1)
                                    asel,s,loc,y,hdf
                                    asel,r,loc,x,espacamento_aux_DF,esp_dc+espacamento_ant
                                    *DO,contador1,1,qnt_RP_DF,1
                                        WPOFFS,espacamento_aux_DF+espacamento_RP_TTB*contador1,hdf,0
                                        WPROTA,0,0,-90
                                        ASBW,all
                                        csys,wp
                                        k,5000+nref,0,pontal*1.5,0
                                        csys,0
                                        nref=nref+1
                                        WPCSYS
                                    *ENDDO
                                    *IF,qnt_ant,GT,1,THEN
                                        espacamento_RP_DF = espacamento_ant/(qnt_RP_DF+1)
                                        *IF,qnt_ant,GT,2,THEN
                                            *DO,contador1,1,(qnt_ant-1)/2,1
                                                asel,s,loc,x,esp_dc+contador1*espacamento_ant,esp_dc+(contador1+1)*espacamento_ant
                                                asel,r,loc,y,hdf
                                                *DO,contador2,1,qnt_RP_DF,1
                                                    WPOFFS,esp_dc+espacamento_ant*contador1+espacamento_RP_DF*contador2,hdf,0
                                                    wprota,0,0,-90
                                                    asbw,all
                                                    csys,wp
                                                    k,5000+nref,0,pontal*1.5,0
                                                    nref=nref+1
                                                    csys,0
                                                    WPCSYS
                                                *ENDDO
                                            *ENDDO
                                        *ENDIF
                                        !Reforçadores plano de Simetria
                                            *IF,mod(qnt_ant,2),EQ,0,THEN
                                                asel,s,loc,x,espacamento_aux_DF+espacamento_ant*qnt_ant/2,boca/2
                                                asel,r,loc,y,hdf
                                                *DO,contador1,1,qnt_RP_DF/2,1
                                                    WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*contador1,hdf,0
                                                    wprota,0,0,-90
                                                    asbw,all
                                                    csys,wp
                                                    k,5000+nref,0,pontal*1.5,0
                                                    nref=nref+1
                                                    csys,0
                                                    WPCSYS
                                                *ENDDO
                                                *IF,mod(qnt_RP_DF,2),GT,0,THEN
                                                    k,5000+nref,boca/2,pontal*1.5,0
                                                    nref=nref+1
                                                *ENDIF
                                            *ENDIF
                                    *ENDIF
                            *ENDIF
                        *ELSE
                            *IF,qnt_ant,EQ,0,THEN
                                espacamento_RP_DF = (boca-2*espacamento_aux_DF)/(qnt_RP_DF+1)
                                !Reforçadores comuns
                                    asel,s,loc,x,espacamento_aux_DF,boca/2
                                    asel,r,loc,y,hdf
                                    *DO,contador1,1,qnt_RP_DF/2,1
                                        WPOFFS,espacamento_aux_DF+espacamento_RP_DF*contador1,hdf,0
                                        wprota,0,0,-90
                                        asbw,all
                                        WPCSYS
                                    *ENDDO
                            *ELSE
                                !Reforçadores comuns
                                    espacamento_RP_TTB = (espacamento_ant+esp_dc-espacamento_aux_DF)/(qnt_RP_DF+1)
                                    asel,s,loc,y,hdf
                                    asel,r,loc,x,espacamento_aux_DF,esp_dc+espacamento_ant
                                    *DO,contador1,1,qnt_RP_DF,1
                                        WPOFFS,espacamento_aux_DF+espacamento_RP_TTB*contador1,hdf,0
                                        WPROTA,0,0,-90
                                        ASBW,all
                                        WPCSYS
                                    *ENDDO
                                    *IF,qnt_ant,GT,1,THEN
                                        espacamento_RP_DF = espacamento_ant/(qnt_RP_DF+1)
                                        *IF,qnt_ant,GT,2,THEN
                                            *DO,contador1,1,(qnt_ant-1)/2,1
                                                asel,s,loc,x,esp_dc+contador1*espacamento_ant,esp_dc+(contador1+1)*espacamento_ant
                                                asel,r,loc,y,hdf
                                                *DO,contador2,1,qnt_RP_DF,1
                                                    WPOFFS,esp_dc+espacamento_ant*contador1+espacamento_RP_DF*contador2,hdf,0
                                                    wprota,0,0,-90
                                                    asbw,all
                                                    WPCSYS
                                                *ENDDO
                                            *ENDDO
                                        *ENDIF
                                        !Reforçadores plano de Simetria
                                            *IF,mod(qnt_ant,2),EQ,0,THEN
                                                asel,s,loc,x,espacamento_aux_DF+espacamento_ant*qnt_ant/2,boca/2
                                                asel,r,loc,y,hdf
                                                *DO,contador1,1,qnt_RP_DF/2,1
                                                    WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*contador1,hdf,0
                                                    wprota,0,0,-90
                                                    asbw,all
                                                    WPCSYS
                                                *ENDDO
                                            *ENDIF
                                    *ENDIF
                            *ENDIF
                        *ENDIF
                    *ENDIF
                !Leves
                    *IF,qnt_RL_DF,GT,0,THEN
                        *IF,qnt_RP_DF,gt,0,THEN 
                            *IF,qnt_ant,EQ,0,THEN
                                espacamento_RL_DF = espacamento_RP_DF/(qnt_RL_DF+1)
                                !Reforçadores Comuns
                                    *DO,contador1,1,(qnt_RP_DF+1)/2,1
                                        asel,s,loc,x,espacamento_aux_DF+(contador1-1)*espacamento_RP_DF,espacamento_aux_DF+contador1*espacamento_RP_DF
                                        asel,r,loc,y,hdf
                                        *DO,contador2,1,qnt_RL_DF,1
                                            WPOFFS,espacamento_aux_DF+espacamento_RP_DF*(contador1-1)+espacamento_RL_DF*contador2,0,0
                                            wprota,0,0,-90
                                            asbw,all
                                            csys,wp
                                            k,5000+nref,0,pontal*1.5,0
                                            nref=nref+1
                                            csys,0
                                            WPCSYS
                                        *ENDDO
                                    *ENDDO
                                !Reforçadores Plano de Simetria
                                    *IF,mod(qnt_RP_DF,2),EQ,0,THEN
                                        asel,s,loc,x,espacamento_RP_DF*qnt_RP_DF/2,boca/2
                                        asel,r,loc,y,hdf
                                        *DO,contador1,1,qnt_RL_DF/2
                                            WPOFFS,espacamento_aux_DF+espacamento_RP_DF*qnt_RP_DF/2+contador1*espacamento_RL_DF,0,0
                                            wprota,0,0,-90
                                            asbw,all
                                            csys,wp
                                            k,5000+nref,0,pontal*1.5,0
                                            nref=nref+1
                                            csys,0
                                            WPCSYS
                                        *ENDDO
                                        *IF,MOD(qnt_RL_DF,2),GT,0,THEN
                                            k,5000+nref,boca/2,pontal*1.5,0
                                            nref=nref+1
                                        *ENDIF
                                    *ENDIF
                            *ELSE
                                !Reforçadores Comuns
                                    espacamento_RL_TTB = (espacamento_RP_TTB)/(qnt_RL_DF+1)
                                    *DO,contador1,1,qnt_RP_DF+1,1
                                        asel,s,loc,y,hdf
                                        asel,r,loc,x,espacamento_aux_DF+espacamento_RP_TTB*(contador1-1),espacamento_aux_DF+espacamento_RP_TTB*contador1
                                        *DO,contador2,1,qnt_RL_DF,1
                                            WPOFFS,espacamento_aux_DF+(contador1-1)*espacamento_RP_TTB+espacamento_RL_TTB*contador2
                                            wprota,0,0,-90
                                            asbw,all
                                            csys,wp
                                            k,5000+nref,0,pontal*1.5,0
                                            nref=nref+1
                                            csys,0
                                            WPCSYS
                                        *ENDDO
                                    *ENDDO
                                    *IF,qnt_ant,GT,1,THEN
                                        espacamento_RL_DF = espacamento_RP_DF/(qnt_RL_DF+1)
                                        *IF,qnt_ant,GT,2,THEN
                                            *DO,contador1,1,(qnt_ant-1)/2,1
                                                *DO,contador2,1,qnt_RP_DF+1,1
                                                    asel,s,loc,x,esp_dc+contador1*espacamento_ant+(contador2-1)*espacamento_RP_DF,esp_dc+espacamento_ant*contador1+espacamento_RP_DF*contador2
                                                    asel,r,loc,y,hdf
                                                    *DO,contador3,1,qnt_RL_DF,1
                                                        WPOFFS,esp_dc+contador1*espacamento_ant+(contador2-1)*espacamento_RP_DF+espacamento_RL_DF*contador3
                                                        wprota,0,0,-90
                                                        asbw,all
                                                        csys,wp
                                                        k,5000+nref,0,pontal*1.5,0
                                                        nref=nref+1
                                                        csys,0
                                                        WPCSYS
                                                    *ENDDO
                                                *ENDDO
                                            *ENDDO
                                        *ENDIF
                                        !Reforçadores Plano de Simetria
                                            *IF,MOD(qnt_ant,2),EQ,0,THEN
                                                *DO,contador1,1,(qnt_RP_DF+1)/2,1
                                                    asel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*(contador1-1),esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*contador1
                                                    asel,r,loc,y,hdf
                                                    *DO,contador2,1,qnt_RL_DF,1
                                                        WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*(contador1-1)+espacamento_RL_DF*contador2,0,0
                                                        wprota,0,0,-90
                                                        asbw,all
                                                        csys,wp
                                                        k,5000+nref,0,pontal*1.5,0
                                                        nref=nref+1
                                                        csys,0
                                                        WPCSYS
                                                    *ENDDO
                                                *ENDDO
                                                *IF,MOD(qnt_RP_DF,2),EQ,0,THEN
                                                    asel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*qnt_RP_DF/2,boca/2
                                                    asel,r,loc,y,hdf
                                                    *DO,contador1,1,qnt_RL_DF/2,1
                                                        WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*qnt_RP_DF/2+espacamento_RL_DF*contador1,0,0
                                                        wprota,0,0,-90
                                                        asbw,all
                                                        csys,wp
                                                        k,5000+nref,0,pontal*1.5,0
                                                        nref=nref+1
                                                        csys,0
                                                        WPCSYS
                                                    *ENDDO
                                                    *IF,MOD(qnt_RL_DF,2),GT,0,THEN,
                                                        k,5000+nref,boca/2,pontal*1.5,0
                                                        nref=nref+1
                                                    *ENDIF
                                                *ENDIF
                                            *ENDIF
                                    *ENDIF
                            *ENDIF
                        *ELSE
                            *IF,qnt_ant,EQ,0,THEN
                                espacamento_RL_DF = (boca-2*espacamento_aux_DF)/(qnt_RL_DF+1)
                                !Reforçadores comuns
                                    asel,s,loc,x,espacamento_aux_DF,boca/2
                                    asel,r,loc,y,hdf
                                    *DO,contador1,1,qnt_RL_DF/2,1
                                        WPOFFS,espacamento_aux_DF+espacamento_RL_DF*contador1,hdf,0
                                        wprota,0,0,-90
                                        asbw,all
                                        csys,wp
                                        k,5000+nref,0,pontal*1.5,0
                                        nref=nref+1
                                        csys,0
                                        WPCSYS
                                    *ENDDO
                                !Reforçadores Plano de Simetria
                                    *IF,mod(qnt_RL_DF,2),GT,0,THEN
                                        k,5000+nref,boca/2,pontal*1.5,0
                                        nref=nref+1
                                    *ENDIF
                            *ELSE
                                !Reforçadores comuns
                                    espacamento_RL_TTB = (espacamento_ant+esp_dc-espacamento_aux_DF)/(qnt_RL_DF+1)
                                    asel,s,loc,y,hdf
                                    asel,r,loc,x,espacamento_aux_DF,esp_dc+espacamento_ant
                                    *DO,contador1,1,qnt_RL_DF,1
                                        WPOFFS,espacamento_aux_DF+espacamento_RL_TTB*contador1,hdf,0
                                        WPROTA,0,0,-90
                                        ASBW,all
                                        csys,wp
                                        k,5000+nref,0,pontal*1.5,0
                                        csys,0
                                        nref=nref+1
                                        WPCSYS
                                    *ENDDO
                                    *IF,qnt_ant,GT,1,THEN
                                        espacamento_RL_DF = espacamento_ant/(qnt_RL_DF+1)
                                        *IF,qnt_ant,GT,2,THEN
                                            *DO,contador1,1,(qnt_ant-1)/2,1
                                                asel,s,loc,x,esp_dc+contador1*espacamento_ant,esp_dc+(contador1+1)*espacamento_ant
                                                asel,r,loc,y,hdf
                                                *DO,contador2,1,qnt_RL_DF,1
                                                    WPOFFS,esp_dc+espacamento_ant*contador1+espacamento_RL_DF*contador2,hdf,0
                                                    wprota,0,0,-90
                                                    asbw,all
                                                    csys,wp
                                                    k,5000+nref,0,pontal*1.5,0
                                                    nref=nref+1
                                                    csys,0
                                                    WPCSYS
                                                *ENDDO
                                            *ENDDO
                                        *ENDIF
                                        !Reforçadores plano de Simetria
                                            *IF,mod(qnt_ant,2),EQ,0,THEN
                                                asel,s,loc,x,espacamento_aux_DF+espacamento_ant*qnt_ant/2,boca/2
                                                asel,r,loc,y,hdf
                                                *DO,contador1,1,qnt_RL_DF/2,1
                                                    WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RL_DF*contador1,hdf,0
                                                    wprota,0,0,-90
                                                    asbw,all
                                                    csys,wp
                                                    k,5000+nref,0,pontal*1.5,0
                                                    nref=nref+1
                                                    csys,0
                                                    WPCSYS
                                                *ENDDO
                                                *IF,mod(qnt_RL_DF,2),GT,0,THEN
                                                    k,5000+nref,boca/2,pontal*1.5,0
                                                    nref=nref+1
                                                *ENDIF
                                            *ENDIF
                                    *ENDIF
                            *ENDIF       
                        *ENDIF
                    *ENDIF
                !Seções
                    !Reforçador Pesado
                        *IF,qnt_RP_DF,GT,0,and,tipo_RP_DF,EQ,1,then
                            SECTYPE,nsec,BEAM,T
                            SECDATA,W1_RP_DF,W2_RP_DF,T1_RP_DF,T2_RP_DF
                            SECOFFSET,USER,0,W2_RP_DF-T1_RP_DF/2+Chapa_TDF/2
                            nsec=nsec+1
                            *IF,MOD(qnt_ant,2),eq,0,AND,MOD(qnt_RP_DF,2),gt,0,THEN
                                SECTYPE,nsec,BEAM,L
                                SECDATA,W1_RP_DF-T2_RP_DF/2,W2_RP_DF,T1_RP_DF,T2_RP_DF/2
                                SECOFFSET,USER,0,W2_RP_DF-T1_RP_DF/2+Chapa_TDF/2
                                nsec=nsec+1
                            *ENDIF
                        *ENDIF
                    !Reforçador Leve
                        *IF,qnt_RL_DF,GT,0,THEN
                            SECTYPE,nsec,BEAM,L
                            SECDATA,W1_RL_DF,W2_RL_DF,T1_RL_DF,T2_RL_DF
                            SECOFFSET,USER,0,W2_RL_DF-T1_RL_DF/2+Chapa_TDF/2
                            nsec=nsec+1
                            *IF,MOD(qnt_ant,2),eq,0,AND,MOD(qnt_RP_DF,2),eq,0,THEN
                                *IF,MOD(qnt_RL_DF,2),GT,0,THEN
                                    SECTYPE,nsec,BEAM,L
                                    SECDATA,W1_RL_DF-T2_RL_DF/2,W2_RL_DF,T1_RL_DF,T2_RL_DF/2
                                    SECOFFSET,USER,0,W2_RL_DF-T1_RL_DF/2+Chapa_TDF/2
                                    nsec=nsec+1
                                *ENDIF
                            *ENDIF
                        *ENDIF
            *ENDIF
        !Reforçadores Fundo
            *IF,L_TB,GT,0,THEN
                *IF,ID,EQ,2,THEN
                    espacamento_aux_DF = L_TB+esp_dc
                *ELSE
                    espacamento_aux_DF = L_TB
                *ENDIF
            *ELSE
                espacamento_aux_DF = xbojo
            *ENDIF
            !Pesados
                *IF,qnt_RP_DF,GT,0,THEN
                    *IF,Tipo_RP_DF,EQ,1,THEN
                        *IF,qnt_ant,EQ,0,THEN
                            espacamento_RP_DF = (boca-2*espacamento_aux_DF)/(qnt_RP_DF+1)
                            !Reforçadores comuns
                                asel,s,loc,x,espacamento_aux_DF,boca/2
                                asel,r,loc,y,-pontal,0
                                *DO,contador1,1,qnt_RP_DF/2,1
                                    Aux_RP_DF = sin(pi*A_Deadrise/180)*(espacamento_aux_DF+espacamento_RP_DF*contador1)
                                    WPOFFS,espacamento_aux_DF+espacamento_RP_DF*contador1,-Aux_RP_DF,0
                                    wprota,0,0,-90
                                    asbw,all
                                    csys,wp
                                    k,5000+nref,0,-pontal*1.5,0
                                    nref=nref+1
                                    csys,0
                                    WPCSYS
                                *ENDDO
                            !Reforçadores Plano de Simetria
                                *IF,mod(qnt_RP_DF,2),GT,0,THEN
                                    k,5000+nref,boca/2,-pontal*1.5,0
                                    nref=nref+1
                                *ENDIF
                        *ELSE
                            !Reforçadores comuns
                                espacamento_RP_FTB = (espacamento_ant+esp_dc-espacamento_aux_DF)/(qnt_RP_DF+1)
                                asel,s,loc,y,-pontal,0
                                asel,r,loc,x,espacamento_aux_DF,esp_dc+espacamento_ant
                                *DO,contador1,1,qnt_RP_DF,1
                                    Aux_RP_DF = sin(pi*A_Deadrise/180)*(espacamento_aux_DF+espacamento_RP_FTB*contador1)
                                    WPOFFS,espacamento_aux_DF+espacamento_RP_FTB*contador1,-Aux_RP_DF,0
                                    WPROTA,0,0,-90
                                    ASBW,all
                                    csys,wp
                                    k,5000+nref,0,-pontal*1.5,0
                                    csys,0
                                    nref=nref+1
                                    WPCSYS
                                *ENDDO
                                *IF,qnt_ant,GT,1,THEN
                                    espacamento_RP_DF = espacamento_ant/(qnt_RP_DF+1)
                                    *IF,qnt_ant,GT,2,THEN
                                        *DO,contador1,1,(qnt_ant-1)/2,1
                                            asel,s,loc,x,esp_dc+contador1*espacamento_ant,esp_dc+(contador1+1)*espacamento_ant
                                            asel,r,loc,y,-pontal,0
                                            *DO,contador2,1,qnt_RP_DF,1
                                                Aux_RP_DF = sin(pi*A_Deadrise/180)*(esp_dc+espacamento_ant*contador1+espacamento_RP_DF*contador2)
                                                WPOFFS,esp_dc+espacamento_ant*contador1+espacamento_RP_DF*contador2,-Aux_RP_DF,0
                                                wprota,0,0,-90
                                                asbw,all
                                                csys,wp
                                                k,5000+nref,0,-pontal*1.5,0
                                                nref=nref+1
                                                csys,0
                                                WPCSYS
                                            *ENDDO
                                        *ENDDO
                                    *ENDIF
                                    !Reforçadores plano de Simetria
                                        *IF,mod(qnt_ant,2),EQ,0,THEN
                                            asel,s,loc,x,espacamento_aux_DF+espacamento_ant*qnt_ant/2,boca/2
                                            asel,r,loc,y,-pontal,0
                                            *DO,contador1,1,qnt_RP_DF/2,1
                                                Aux_RP_DF = sin(pi*A_Deadrise/180)*(esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*contador1)
                                                WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*contador1,-Aux_RP_DF,0
                                                wprota,0,0,-90
                                                asbw,all
                                                csys,wp
                                                k,5000+nref,0,-pontal*1.5,0
                                                nref=nref+1
                                                csys,0
                                                WPCSYS
                                            *ENDDO
                                            *IF,mod(qnt_RP_DF,2),GT,0,THEN
                                                k,5000+nref,boca/2,-pontal*1.5,0
                                                nref=nref+1
                                            *ENDIF
                                        *ENDIF
                                *ENDIF
                        *ENDIF
                    *ELSE
                        *IF,qnt_ant,EQ,0,THEN
                            espacamento_RP_DF = (boca-2*espacamento_aux_DF)/(qnt_RP_DF+1)
                            !Reforçadores comuns
                                asel,s,loc,x,espacamento_aux_DF,boca/2
                                asel,r,loc,y,-pontal,0
                                *DO,contador1,1,qnt_RP_DF/2,1
                                    Aux_RP_DF = sin(pi*A_Deadrise/180)*(espacamento_aux_DF+espacamento_RP_DF*contador1)
                                    WPOFFS,espacamento_aux_DF+espacamento_RP_DF*contador1,-Aux_RP_DF,0
                                    wprota,0,0,-90
                                    asbw,all
                                    WPCSYS
                                *ENDDO
                        *ELSE
                            !Reforçadores comuns
                                espacamento_RP_FTB = (espacamento_ant+esp_dc-espacamento_aux_DF)/(qnt_RP_DF+1)
                                asel,s,loc,y,-pontal,0
                                asel,r,loc,x,espacamento_aux_DF,esp_dc+espacamento_ant
                                *DO,contador1,1,qnt_RP_DF,1
                                    Aux_RP_DF = sin(pi*A_Deadrise/180)*(espacamento_aux_DF+espacamento_RP_FTB*contador1)
                                    WPOFFS,espacamento_aux_DF+espacamento_RP_FTB*contador1,-Aux_RP_DF,0
                                    WPROTA,0,0,-90
                                    ASBW,all
                                    WPCSYS
                                *ENDDO
                                *IF,qnt_ant,GT,1,THEN
                                    espacamento_RP_DF = espacamento_ant/(qnt_RP_DF+1)
                                    *IF,qnt_ant,GT,2,THEN
                                        *DO,contador1,1,(qnt_ant-1)/2,1
                                            asel,s,loc,x,esp_dc+contador1*espacamento_ant,esp_dc+(contador1+1)*espacamento_ant
                                            asel,r,loc,y,-pontal,0
                                            *DO,contador2,1,qnt_RP_DF,1
                                                Aux_RP_DF = sin(pi*A_Deadrise/180)*(esp_dc+espacamento_ant*contador1+espacamento_RP_DF*contador2)
                                                WPOFFS,esp_dc+espacamento_ant*contador1+espacamento_RP_DF*contador2,-Aux_RP_DF,0
                                                wprota,0,0,-90
                                                asbw,all
                                                WPCSYS
                                            *ENDDO
                                        *ENDDO
                                    *ENDIF
                                    !Reforçadores plano de Simetria
                                        *IF,mod(qnt_ant,2),EQ,0,THEN
                                            asel,s,loc,x,espacamento_aux_DF+espacamento_ant*qnt_ant/2,boca/2
                                            asel,r,loc,y,-pontal,0
                                            *DO,contador1,1,qnt_RP_DF/2,1
                                                Aux_RP_DF = sin(pi*A_Deadrise/180)*(esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*contador1)
                                                WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*contador1,-Aux_RP_DF,0
                                                wprota,0,0,-90
                                                asbw,all
                                                WPCSYS
                                            *ENDDO
                                        *ENDIF
                                *ENDIF
                        *ENDIF
                    *ENDIF
                *ENDIF
            !Leves
                *IF,qnt_RL_DF,GT,0,THEN
                    *IF,qnt_RP_DF,gt,0,THEN 
                        *IF,qnt_ant,EQ,0,THEN
                            espacamento_RL_DF = espacamento_RP_DF/(qnt_RL_DF+1)
                            !Reforçadores Comuns
                                *DO,contador1,1,(qnt_RP_DF+1)/2,1
                                    asel,s,loc,x,espacamento_aux_DF+(contador1-1)*espacamento_RP_DF,espacamento_aux_DF+contador1*espacamento_RP_DF
                                    asel,r,loc,y,-pontal,0
                                    *DO,contador2,1,qnt_RL_DF,1
                                        WPOFFS,espacamento_aux_DF+espacamento_RP_DF*(contador1-1)+espacamento_RL_DF*contador2,0,0
                                        wprota,0,0,-90
                                        asbw,all
                                        csys,wp
                                        k,5000+nref,0,-pontal*1.5,0
                                        nref=nref+1
                                        csys,0
                                        WPCSYS
                                    *ENDDO
                                *ENDDO
                            !Reforçadores Plano de Simetria
                                *IF,mod(qnt_RP_DF,2),EQ,0,THEN
                                    asel,s,loc,x,espacamento_RP_DF*qnt_RP_DF/2,boca/2
                                    asel,r,loc,y,-pontal,0
                                    *DO,contador1,1,qnt_RL_DF/2
                                        WPOFFS,espacamento_aux_DF+espacamento_RP_DF*qnt_RP_DF/2+contador1*espacamento_RL_DF,0,0
                                        wprota,0,0,-90
                                        asbw,all
                                        csys,wp
                                        k,5000+nref,0,-pontal*1.5,0
                                        nref=nref+1
                                        csys,0
                                        WPCSYS
                                    *ENDDO
                                    *IF,MOD(qnt_RL_DF,2),GT,0,THEN
                                        k,5000+nref,boca/2,-pontal*1.5,0
                                        nref=nref+1
                                    *ENDIF
                                *ENDIF
                        *ELSE
                            !Reforçadores Comuns
                                espacamento_RL_FTB = (espacamento_RP_FTB)/(qnt_RL_DF+1)
                                *DO,contador1,1,qnt_RP_DF+1,1
                                    asel,s,loc,y,-pontal,0
                                    asel,r,loc,x,espacamento_aux_DF+espacamento_RP_FTB*(contador1-1),espacamento_aux_DF+espacamento_RP_FTB*contador1
                                    *DO,contador2,1,qnt_RL_DF,1
                                        WPOFFS,espacamento_aux_DF+(contador1-1)*espacamento_RP_FTB+espacamento_RL_FTB*contador2
                                        wprota,0,0,-90
                                        asbw,all
                                        csys,wp
                                        k,5000+nref,0,-pontal*1.5,0
                                        nref=nref+1
                                        csys,0
                                        WPCSYS
                                    *ENDDO
                                *ENDDO
                                *IF,qnt_ant,GT,1,THEN
                                    espacamento_RL_DF = espacamento_RP_DF/(qnt_RL_DF+1)
                                    *IF,qnt_ant,GT,2,THEN
                                        *DO,contador1,1,(qnt_ant-1)/2,1
                                            *DO,contador2,1,qnt_RP_DF+1,1
                                                asel,s,loc,x,esp_dc+contador1*espacamento_ant+(contador2-1)*espacamento_RP_DF,esp_dc+espacamento_ant*contador1+espacamento_RP_DF*contador2
                                                asel,r,loc,y,-pontal,0
                                                *DO,contador3,1,qnt_RL_DF,1
                                                    WPOFFS,esp_dc+contador1*espacamento_ant+(contador2-1)*espacamento_RP_DF+espacamento_RL_DF*contador3
                                                    wprota,0,0,-90
                                                    asbw,all
                                                    csys,wp
                                                    k,5000+nref,0,-pontal*1.5,0
                                                    nref=nref+1
                                                    csys,0
                                                    WPCSYS
                                                *ENDDO
                                            *ENDDO
                                        *ENDDO
                                    *ENDIF
                                    !Reforçadores Plano de Simetria
                                        *IF,MOD(qnt_ant,2),EQ,0,THEN
                                            *DO,contador1,1,(qnt_RP_DF+1)/2,1
                                                asel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*(contador1-1),esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*contador1
                                                asel,r,loc,y,-pontal,0
                                                *DO,contador2,1,qnt_RL_DF,1
                                                    WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*(contador1-1)+espacamento_RL_DF*contador2,0,0
                                                    wprota,0,0,-90
                                                    asbw,all
                                                    csys,wp
                                                    k,5000+nref,0,-pontal*1.5,0
                                                    nref=nref+1
                                                    csys,0
                                                    WPCSYS
                                                *ENDDO
                                            *ENDDO
                                            *IF,MOD(qnt_RP_DF,2),EQ,0,THEN
                                                asel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*qnt_RP_DF/2,boca/2
                                                asel,r,loc,y,-pontal,0
                                                *DO,contador1,1,qnt_RL_DF/2,1
                                                    WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*qnt_RP_DF/2+espacamento_RL_DF*contador1,0,0
                                                    wprota,0,0,-90
                                                    asbw,all
                                                    csys,wp
                                                    k,5000+nref,0,-pontal*1.5,0
                                                    nref=nref+1
                                                    csys,0
                                                    WPCSYS
                                                *ENDDO
                                                *IF,MOD(qnt_RL_DF,2),GT,0,THEN,
                                                    k,5000+nref,boca/2,-pontal*1.5,0
                                                    nref=nref+1
                                                *ENDIF
                                            *ENDIF
                                        *ENDIF
                                *ENDIF
                        *ENDIF
                    *ELSE
                        *IF,qnt_ant,EQ,0,THEN
                            espacamento_RL_DF = (boca-2*espacamento_aux_DF)/(qnt_RL_DF+1)
                            !Reforçadores comuns
                                asel,s,loc,x,espacamento_aux_DF,boca/2
                                asel,r,loc,y,-pontal,0
                                *DO,contador1,1,qnt_RL_DF/2,1
                                    WPOFFS,espacamento_aux_DF+espacamento_RL_DF*contador1,-Aux_RL_DF,0
                                    wprota,0,0,-90
                                    asbw,all
                                    csys,wp
                                    k,5000+nref,0,-pontal*1.5,0
                                    nref=nref+1
                                    csys,0
                                    WPCSYS
                                *ENDDO
                            !Reforçadores Plano de Simetria
                                *IF,mod(qnt_RL_DF,2),GT,0,THEN
                                    k,5000+nref,boca/2,-pontal*1.5,0
                                    nref=nref+1
                                *ENDIF
                        *ELSE
                            !Reforçadores comuns
                                espacamento_RL_FTB = (espacamento_ant+esp_dc-espacamento_aux_DF)/(qnt_RL_DF+1)
                                asel,s,loc,y,-pontal,0
                                asel,r,loc,x,espacamento_aux_DF,esp_dc+espacamento_ant
                                *DO,contador1,1,qnt_RL_DF,1
                                    WPOFFS,espacamento_aux_DF+espacamento_RL_FTB*contador1,-Aux_RL_DF,0
                                    WPROTA,0,0,-90
                                    ASBW,all
                                    csys,wp
                                    k,5000+nref,0,-pontal*1.5,0
                                    csys,0
                                    nref=nref+1
                                    WPCSYS
                                *ENDDO
                                *IF,qnt_ant,GT,1,THEN
                                    espacamento_RL_DF = espacamento_ant/(qnt_RL_DF+1)
                                    *IF,qnt_ant,GT,2,THEN
                                        *DO,contador1,1,(qnt_ant-1)/2,1
                                            asel,s,loc,x,esp_dc+contador1*espacamento_ant,esp_dc+(contador1+1)*espacamento_ant
                                            asel,r,loc,y,-pontal,0
                                            *DO,contador2,1,qnt_RL_DF,1
                                                WPOFFS,esp_dc+espacamento_ant*contador1+espacamento_RL_DF*contador2,-Aux_RL_DF,0
                                                wprota,0,0,-90
                                                asbw,all
                                                csys,wp
                                                k,5000+nref,0,-pontal*1.5,0
                                                nref=nref+1
                                                csys,0
                                                WPCSYS
                                            *ENDDO
                                        *ENDDO
                                    *ENDIF
                                    !Reforçadores plano de Simetria
                                        *IF,mod(qnt_ant,2),EQ,0,THEN
                                            asel,s,loc,x,espacamento_aux_DF+espacamento_ant*qnt_ant/2,boca/2
                                            asel,r,loc,y,-pontal,0
                                            *DO,contador1,1,qnt_RL_DF/2,1
                                                WPOFFS,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RL_DF*contador1,-Aux_RL_DF,0
                                                wprota,0,0,-90
                                                asbw,all
                                                csys,wp
                                                k,5000+nref,0,-pontal*1.5,0
                                                nref=nref+1
                                                csys,0
                                                WPCSYS
                                            *ENDDO
                                            *IF,mod(qnt_RL_DF,2),GT,0,THEN
                                                k,5000+nref,boca/2,-pontal*1.5,0
                                                nref=nref+1
                                            *ENDIF
                                        *ENDIF
                                *ENDIF
                        *ENDIF       
                    *ENDIF
                *ENDIF
            !Seções
                !Reforçador Pesado
                    *IF,qnt_RP_DF,GT,0,and,tipo_RP_DF,EQ,1,then
                        SECTYPE,nsec,BEAM,T
                        SECDATA,W1_RP_DF,W2_RP_DF,T1_RP_DF,T2_RP_DF
                        SECOFFSET,USER,0,W2_RP_DF-T1_RP_DF/2+Chapa_Fundo/2
                        nsec=nsec+1
                        *IF,MOD(qnt_ant,2),eq,0,AND,MOD(qnt_RP_DF,2),gt,0,THEN
                            SECTYPE,nsec,BEAM,L
                            SECDATA,W1_RP_DF-T2_RP_DF/2,W2_RP_DF,T1_RP_DF,T2_RP_DF/2
                            SECOFFSET,USER,0,W2_RP_DF-T1_RP_DF/2+Chapa_Fundo/2
                            nsec=nsec+1
                        *ENDIF
                    *ENDIF
                !Reforçador Leve
                    *IF,qnt_RL_DF,GT,0,THEN
                        SECTYPE,nsec,BEAM,L
                        SECDATA,W1_RL_DF,W2_RL_DF,T1_RL_DF,T2_RL_DF
                        SECOFFSET,USER,0,W2_RL_DF-T1_RL_DF/2+Chapa_Fundo/2
                        nsec=nsec+1
                        *IF,MOD(qnt_ant,2),eq,0,AND,MOD(qnt_RP_DF,2),eq,0,THEN
                            *IF,MOD(qnt_RL_DF,2),GT,0,THEN
                                SECTYPE,nsec,BEAM,L
                                SECDATA,W1_RL_DF-T2_RL_DF/2,W2_RL_DF,T1_RL_DF,T2_RL_DF/2
                                SECOFFSET,USER,0,W2_RL_DF-T1_RL_DF/2+Chapa_Fundo/2
                                nsec=nsec+1
                            *ENDIF
                        *ENDIF
                    *ENDIF 
        !Reforçadores T2 DF
            *IF,Tipo_RP_DF,EQ,2,THEN
                *IF,qnt_ant,EQ,0,THEN
                    *DO,contador1,1,(qnt_RP_DF+1)/2,1
                        lsel,s,loc,x,espacamento_aux_DF+espacamento_RP_DF*contador1
                        lsel,r,loc,y,-pontal,hdf
                        *get,DFRP1,line,0,num,min
                        *get,DFRP2,line,0,num,max
                        askin,DFRP1,DFRP2
                    *ENDDO
                *ELSE
                    *DO,contador1,1,qnt_RP_DF,1
                        lsel,s,loc,x,espacamento_aux_DF+espacamento_RP_TTB*contador1
                        lsel,r,loc,y,-pontal,hdf
                        *get,DFRP1,line,0,num,min
                        *get,DFRP2,line,0,num,max
                        askin,DFRP1,DFRP2
                    *ENDDO
                    *IF,qnt_ant,GT,1,THEN
                        *IF,qnt_ant,GT,2,THEN
                            *DO,contador1,1,(qnt_ant-1)/2,1
                                *DO,contador2,1,qnt_RP_DF,1
                                    lsel,s,loc,x,esp_dc+espacamento_ant*contador1+espacamento_RP_DF*contador2
                                    lsel,r,loc,y,-pontal,hdf
                                    *get,DFRP1,line,0,num,min
                                    *get,DFRP2,line,0,num,max
                                    askin,DFRP1,DFRP2
                                *ENDDO
                            *ENDDO
                        *ENDIF
                        *IF,MOD(qnt_ant,2),eq,0,THEN
                            *DO,contador1,1,(qnt_RP_DF+1)/2,1
                                lsel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*contador1
                                lsel,r,loc,y,-pontal,hdf
                                *get,DFRP1,line,0,num,min
                                *get,DFRP2,line,0,num,max
                                askin,DFRP1,DFRP2
                            *ENDDO
                        *ENDIF
                    *ENDIF
                *ENDIF
            *ENDIF 
            !Seções
                SECTYPE,nsec,SHELL
                SECDATA,chapa_t2_df,1,,,'chapa DF'
                SECOFFSET,MID
                nsec=nsec+1
                *IF,MOD(qnt_ant,2),EQ,0,AND,MOD(qnt_RP_DF,2),GT,0,THEN
                    SECTYPE,nsec,SHELL
                    SECDATA,chapa_t2_df/2,1,,,'chapa DF Sym'
                    SECOFFSET,MID
                    nsec=nsec+1
                *ENDIF
        !Reforçadores TB
            *IF,esp_Ref_TB,GT,0,THEN
                *IF,Id,EQ,2,THEN
                    h_aux_tb = h_tb+hdf
                    l_aux_Tb = l_tb+esp_dc
                *ELSE
                    h_aux_tb = h_tb
                    l_aux_tb = l_tb
                *ENDIF
                !Costado Esquerdo
                    asel,s,loc,x,0
                    asel,r,loc,y,ybojo,h_aux_tb
                    contador1 = 1
                    contador2 = 1
                    *DOWHILE,contador2
                        WPOFFS,0,ybojo+contador1*esp_Ref_TB,0
                        WPROTA,-90,0,-90
                        asbw,all
                        csys,wp
                        k,5000+nref,0,-pontal-h_max_TA,0
                        nref=nref+1
                        csys,0
                        contador1 = contador1+1
                        wpcsys
                        *IF,ybojo+contador1*esp_Ref_TB,GE,h_aux_tb,THEN
                            contador2=0
                        *ENDIF
                    *ENDDO
                !Fundo Esquerdo
                    asel,s,loc,y,-pontal,0
                    asel,r,loc,x,xbojo,l_aux_TB
                    contador1 = 1
                    contador2 = 1 
                    *DOWHILE,contador2
                        WPOFFS,xbojo+contador1*esp_Ref_TB,0,0
                        wprota,0,0,-90
                        asbw,all
                        csys,wp
                        k,5000+nref,0,-pontal/2,0
                        nref=nref+1
                        csys,0
                        contador1 = contador1+1
                        wpcsys
                        *IF,xbojo+contador1*esp_Ref_TB,GE,L_aux_TB,THEN
                            contador2=0
                        *ENDIF
                    *ENDDO
                *IF,Id,NE,2,THEN
                    !Diagonal Esquerdo
                        asel,s,loc,x,esp_dc,l_aux_TB
                        asel,r,loc,y,hdf,h_aux_tb
                        asel,u,loc,x,0
                        a_aux_TB = atan((h_aux_tb-HDF)/(L_aux_TB-esp_dc))*(180/pi)
                        l_TB_Diagonal = sqrt((h_aux_tb-HDF)**2+(L_aux_TB-esp_dc)**2)
                        contador1 = 1
                        contador2 = 1 
                        WPOFFS,l_aux_tb,hdf,0
                        wprota,-a_aux_tb,0,-90
                        *DOWHILE,contador2
                            WPOFFS,0,0,esp_Ref_TB
                            asbw,all
                            csys,wp
                            k,5000+nref,0,1.5*pontal,0
                            nref=nref+1
                            csys,0
                            contador1 = contador1+1
                            *IF,esp_Ref_TB*contador1,GE,l_TB_diagonal-RL_aux_TB_W1,THEN
                                contador2 = 0
                            *ENDIF
                        *ENDDO
                        wpcsys
                *ELSE
                    !Topo Esquerdo
                        asel,s,loc,y,h_aux_tb
                        asel,r,loc,x,0,l_aux_TB
                        contador1 = 1
                        contador2 = 1 
                        *DOWHILE,contador2
                            WPOFFS,contador1*esp_Ref_TB,0,0
                            wprota,0,0,-90
                            *IF,contador1*esp_Ref_Tb,NE,esp_dc,THEN
                                asbw,all
                            *ENDIF
                            csys,wp
                            k,5000+nref,0,pontal,0
                            nref=nref+1
                            csys,0
                            contador1 = contador1+1
                            wpcsys
                            *IF,contador1*esp_Ref_TB,GE,L_aux_TB,THEN
                                contador2=0
                            *ENDIF
                        *ENDDO
                    !Interno Esquerdo
                        asel,s,loc,x,L_aux_Tb
                        asel,r,loc,y,-pontal,h_aux_tb
                        contador1 = 1
                        contador2 = 1
                        aux_tb_interno = sin(pi*A_Deadrise/180)*l_aux_tb
                        *DOWHILE,contador2
                            WPOFFS,l_aux_tb,contador1*esp_Ref_TB-aux_tb_interno,0
                            WPROTA,-90,0,-90
                            *IF,contador1*esp_ref_tb-aux_tb_interno,NE,hdf,THEN
                                asbw,all
                            *ENDIF
                            csys,wp
                            k,5000+nref,0,pontal-h_max_TA,0
                            nref=nref+1
                            csys,0
                            contador1 = contador1+1
                            wpcsys
                            *IF,contador1*esp_Ref_TB,GE,h_aux_tb+aux_tb_interno,THEN
                                contador2=0
                            *ENDIF
                        *ENDDO
                *ENDIF
                !Seções
                    *IF,esp_Ref_TB,GT,0,THEN
                        SECTYPE,nsec,BEAM,L
                        SECDATA,REF_TB_W1,REF_TB_W2,REF_TB_T1,REF_TB_T2
                        SECOFFSET,USER,0,REF_TB_W2-REF_TB_T1/2+Chapa_DC/2
                        nsec=nsec+1
                    *ENDIF
            *ENDIF
        !Reforçadores TA
            *IF,espacamento_Ref_Ta,GT,0,THEN
                !Juntando areas
                    *IF,esp_dc,GT,0,THEN
                        asel,s,loc,y,pontal,pontal*2
                        asel,r,loc,x,0,l_TA
                        aadd,all
                    *ENDIF
                !Costado Esquerdo
                    asel,s,loc,x,0
                    asel,r,loc,y,pontal-h_max_TA,pontal
                    contador1 = 1
                    contador2 = 2
                    *DOWHILE,contador2
                        WPOFFS,0,pontal-h_Max_TA+espacamento_Ref_TA*contador1
                        wprota,-90,0,-90
                        asbw,all
                        csys,wp
                        k,5000+nref,0,-pontal-h_max_TA,0
                        nref=nref+1
                        csys,0
                        contador1 = contador1+1
                        wpcsys
                        *IF,espacamento_Ref_TA*contador1,GE,h_Max_TA-RL_TA_W1,THEN
                            contador2 = 0
                        *ENDIF
                    *ENDDO
                !Topo Esquerdo
                    asel,s,loc,y,pontal,pontal*2
                    asel,r,loc,x,0,l_TA
                    contador1 = 1
                    contador2 = 2
                    *DOWHILE,contador2
                        WPOFFS,espacamento_Ref_TA*contador1,pontal
                        wprota,-A_Camber,0,-90
                        asbw,all
                        csys,wp
                        k,5000+nref,0,pontal,0
                        nref=nref+1
                        csys,0
                        contador1 = contador1+1
                        wpcsys
                        *IF,espacamento_Ref_TA*contador1,GE,l_TA-RL_TA_W1,THEN
                            contador2 = 0
                        *ENDIF
                    *ENDDO
                !Diagonal Esquerdo
                    asel,s,loc,y,pontal-h_max_TA,pontal-h_Min_TA
                    asel,r,loc,x,esp_dc,l_TA
                    asel,u,loc,x,esp_dc
                    a_aux_ta = atan((h_Max_TA-h_Min_TA)/(l_TA-esp_dc))*(180/pi)
                    l_ta_diagonal = SQRT((h_Max_TA-h_Min_TA)**2+(l_TA-esp_dc)**2)
                    contador1 = 1
                    contador2 = 1
                    WPOFFS,esp_dc,pontal-h_Max_TA
                    wprota,a_aux_TA,0,-90
                    *DOWHILE,contador2
                        WPOFFS,0,0,-espacamento_Ref_TA
                        asbw,all
                        csys,wp
                        k,5000+nref,0,-1.5*pontal,0
                        nref=nref+1
                        csys,0
                        contador1 = contador1+1
                        *IF,espacamento_Ref_TA*contador1,GE,l_TA_diagonal-RL_TA_W1,THEN
                            contador2 = 0
                        *ENDIF
                    *ENDDO
                    wpcsys
                !Seções
                    *IF,espacamento_Ref_TA,GT,0,THEN
                        SECTYPE,nsec,BEAM,L
                        SECDATA,REF_TA_W1,REF_TA_W2,REF_TA_T1,REF_TA_T2
                        SECOFFSET,USER,0,REF_TA_W2-REF_TA_T1/2+Chapa_DC/2
                        nsec=nsec+1
                    *ENDIF
            *ENDIF
        !Reforçadores Antepara
            *IF,qnt_ant,EQ,1,THEN
                asel,s,loc,x,boca/2
                asel,r,loc,y,hdf,pontal*2
                contador1 = 1
                *DOWHILE,contador1
                    WPOFFS,boca/2,hdf,contador1*esp_ref_ant
                    wprota,90,0,0
                    ASBW,all
                    K,5000+nref,boca,0,0
                    nref=nref+1
                    *IF,(contador1+1)*esp_ref_ant,GE,secao,THEN
                        contador1=0
                    *ELSE
                        contador1=contador1+1
                    *ENDIF
                    WPCSYS
                *ENDDO
                !Seção  
                    SECTYPE,nsec,BEAM,T
                    SECDATA,Ref_Ant_W1,Ref_Ant_W2,Ref_Ant_T1,Ref_Ant_T2
                    SECOFFSET,USER,0,Ref_Ant_W2-Ref_Ant_T1/2+Chapa_ant/4
                    nsec=nsec+1
            *ENDIF
        !Cavernas   
            !Topo
                !TA
                    *IF,Id,eq,1,THEN   
                        contador1=1
                        *DOWHILE,contador1
                            WPOFFS,0,0,esp_cav_topo*(contador1-1)
                            *IF,contador1-1,GT,0,AND,(contador1-1)*esp_cav_Topo,LT,secao,THEN
                                asel,s,loc,y,pontal-h_max_ta,pontal*2
                                asel,r,loc,x,0,L_TA
                                asbw,all
                            *ENDIF
                            k,5000+nref,L_ta/2,pontal-h_max_Ta/2,esp_cav_topo*(contador1-1)
                            nref = nref+1
                            contador1=contador1+1
                            *IF,(contador1-1)*esp_cav_topo,GT,secao,THEN
                                contador1=0
                            *ENDIF
                            WPCSYS
                        *ENDDO
                        !Secao
                            SECTYPE,nsec,beam,RECT
                            SECDATA,l_cav,h_cav
                            SECOFFSET,user,0,-h_cav/2
                            nsec=nsec+1
                    *ENDIF
                !CP
                    *IF,ID,GE,2,THEN
                        *IF,ID,GT,2,OR,esp_dc,GT,0,THEN 
                            contador1=1
                            *DOWHILE,contador1
                                WPOFFS,0,0,esp_cav_Topo*(contador1-1)
                                *IF,contador1-1,GT,0,AND,(contador1-1)*esp_cav_Topo,LT,secao,THEN
                                    asel,s,loc,y,pontal,pontal*2
                                    asbw,all
                                *ENDIF
                                K,5000+nref,boca/2,pontal-l_cav,esp_cav_topo*(contador1-1)
                                nref=nref+1
                                contador1=contador1+1
                                *IF,(contador1-1)*esp_cav_topo,GT,secao,THEN
                                    contador1=0
                                *ENDIF
                                WPCSYS
                            *ENDDO
                            !Secao
                                SECTYPE,nsec,beam,RECT
                                SECDATA,l_cav,h_cav
                                SECOFFSET,user,0,-h_cav/2
                                nsec=nsec+1
                        *ENDIF
                    *ENDIF
            !Costados  
                contador1=1
                *DOWHILE,contador1
                    WPOFFS,0,0,esp_cav_DC*(contador1-1)
                    *IF,contador1-1,GT,0,AND,(contador1-1)*esp_cav_DC,LT,secao,THEN
                        asel,s,loc,x,0
                        asel,a,loc,x,esp_dc
                        asel,r,loc,y,h_aux_tb,pontal-h_max_ta
                        asbw,all
                    *ENDIF
                    *IF,esp_dc,GT,0,THEN
                        k,5000+nref,esp_dc/2,(pontal-h_max_TA+h_aux_tb)/2,esp_cav_DC*(contador1-1)
                    *ELSE
                        k,5000+nref,l_cav,(pontal-h_max_TA+h_aux_tb)/2,esp_cav_DC*(contador1-1)
                    *ENDIF
                    nref=nref+1
                    contador1=contador1+1
                    *IF,(contador1-1)*esp_cav_DC,GT,secao,THEN
                        contador1=0
                    *ENDIF
                    WPCSYS
                *ENDDO
                !Secao
                    SECTYPE,nsec,beam,RECT
                    SECDATA,l_cav,h_cav
                    SECOFFSET,user,0,-h_cav/2
                    nsec=nsec+1
            !Fundo
                *IF,esp_cav_DF,GT,0,THEN
                    !TB
                        *IF,L_aux_TB,gt,0,THEN
                            contador1=1
                            *DOWHILE,contador1
                                WPOFFS,0,0,esp_cav_DF*(contador1-1)
                                *IF,contador1-1,GT,0,AND,(contador1-1)*esp_cav_DF,LT,secao,THEN
                                    asel,s,loc,x,0,L_aux_TB
                                    asel,r,loc,y,-pontal,H_aux_TB
                                    asbw,all
                                *ENDIF
                                K,5000+nref,l_aux_TB/2,h_aux_TB/2,esp_cav_DF*(contador1-1)
                                nref=nref+1
                                contador1=contador1+1
                                *IF,(contador1-1)*esp_cav_DF,GT,secao,THEN
                                    contador1=0
                                *ENDIF
                                WPCSYS
                            *ENDDO
                            contador1=1
                            !Secao
                                SECTYPE,nsec,beam,RECT
                                SECDATA,l_cav,h_cav
                                SECOFFSET,user,0,-h_cav/2
                                nsec=nsec+1
                        *ENDIF
                    !Fundo
                        contador1=1
                        *DOWHILE,contador1
                            WPOFFS,0,0,esp_cav_DF*(contador1-1)
                            *IF,contador1-1,GT,0,AND,(contador1-1)*esp_cav_DF,LT,secao,THEN
                                asel,s,loc,y,hdf
                                asel,a,loc,y,-pontal,0
                                asel,r,loc,x,L_aux_TB,boca/2
                                asbw,all
                            *ENDIF
                            K,5000+nref,l_aux_TB/2,h_TB/2,esp_cav_DF*(contador1-1)
                            nref=nref+1
                            contador1=contador1+1
                            *IF,(contador1-1)*esp_cav_DF,GT,secao,THEN
                                contador1=0
                            *ENDIF
                            WPCSYS
                        *ENDDO
                        !Secao
                            SECTYPE,nsec,beam,RECT
                            SECDATA,l_cav,h_cav
                            SECOFFSET,user,0,-h_cav/2
                            nsec=nsec+1
                *ENDIF
!Malha  
    nsec=1
    /EFACET,1
    /ESHAPE,1 
    !Casca
        !Convés Principal
            asel,s,loc,y,pontal,pontal*2
            *IF,Id,EQ,1,THEN
                asel,a,loc,y,pontal-h_max_ta,pontal*2
                asel,u,loc,x,0
            *ENDIF
            aatt,1,,1,,nsec
            aesize,all,100
            amesh,all
            nsec=nsec+1
        !Costados
            asel,s,loc,x,0
            aatt,1,,1,,nsec
            aesize,all,100
            amesh,all
            *IF,esp_dc,GT,0,THEN
                asel,s,loc,x,esp_dc
                asel,r,loc,y,h_Tb,pontal*2
                *IF,l_tb,GT,0,AND,l_tb,NE,esp_dc,THEN
                    asel,a,loc,x,L_TB
                *ENDIF
                aatt,1,,1,,nsec
                amesh,all
            *ENDIF
            nsec=nsec+1
        !Fundo  
            asel,s,loc,y,-pontal,ybojo
            asel,u,loc,x,xbojo,boca/2
            asel,a,loc,y,-pontal,0
            aatt,1,,1,,nsec
            aesize,all,100
            amesh,all
            *IF,ID,EQ,2,THEN
                asel,s,loc,x,L_TB+esp_dc
                asel,a,loc,y,h_TB+hdf
                aatt,1,,1,,nsec
                !aesize,all,100
                amesh,all
            *ENDIF
            nsec=nsec+1
        !Conveses Médios
            *IF,qnt_cm,GT,0,THEN
                asel,s,loc,y,hdf+hcm
                *IF,qnt_cm,GT,1,THEN
                    *DO,contador1,1,qnt_cm-1,1
                        asel,a,loc,y,hdf+hcm*(contador1+1)
                    *ENDDO
                *ENDIF
                asel,r,loc,x,esp_dc,boca/2
                aatt,1,,1,,nsec
                aesize,all,100
                amesh,all
                nsec=nsec+1
            *ENDIF
        !Anteparas
            *IF,qnt_ant,GT,0,THEN
                *IF,qnt_ant,GT,1,THEN
                    asel,s,loc,x,esp_dc+espacamento_ant
                    *IF,qnt_ant,GT,3,THEN
                        *DO,contador1,1,(qnt_ant-2)/2
                            asel,a,loc,x,esp_dc+espacamento_ant*(contador1+1)
                        *ENDDO
                    *ENDIF
                    aatt,1,,1,,nsec
                    aesize,all,100
                    amesh,all
                    nsec=nsec+1
                *ENDIF
                *IF,MOD(qnt_ant,2),GT,0,THEN
                    asel,s,loc,x,boca/2
                    aatt,1,,1,,nsec
                    aesize,all,100
                    amesh,all
                    nsec=nsec+1
                *ENDIF
            *ENDIF
        !Teto do Duplo Fundo
            *IF,hdf,GT,0,THEN
                asel,s,loc,y,hdf
                *IF,h_tb,GT,0,AND,h_tb,NE,hdf,THEN
                    asel,a,loc,y,hdf,h_tb
                    asel,u,loc,x,0
                *ENDIF
                aatt,1,,1,,nsec
                aesize,all,100
                amesh,all
                nsec=nsec+1
            *ENDIF
    !Viga
        nref=1
        !Reforçadores Conveses Médios
            *IF,qnt_cm,GT,0,THEN
                !Pesado
                    *IF,qnt_RP_CM,GT,0,THEN
                        *IF,qnt_ant,EQ,0,THEN
                            *DO,contador1,1,qnt_RP_CM/2,1
                                lsel,s,loc,x,esp_dc+espacamento_RP_CM*contador1
                                lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDDO
                            nsec=nsec+1
                            *IF,MOD(qnt_RP_CM,2),GT,0,THEN
                                lsel,s,loc,x,boca/2
                                lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                                nsec=nsec+1
                            *ENDIF
                        *ELSE
                            *DO,contador1,1,(qnt_ant+1)/2,1
                                *DO,contador2,1,qnt_RP_CM,1
                                    lsel,s,loc,x,esp_dc+(contador1-1)*espacamento_ant+contador2*espacamento_RP_CM
                                    lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDDO
                            *ENDDO
                            *IF,MOD(qnt_ant,2),EQ,0,THEN
                                *DO,contador1,1,qnt_RP_CM/2,1
                                    lsel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CM*contador1
                                    lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDDO
                                *IF,MOD(qnt_RP_CM,2),GT,0,THEN
                                    nsec=nsec+1
                                    lsel,s,loc,x,boca/2
                                    lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDIF
                            *ENDIF
                            nsec=nsec+1
                        *ENDIF
                    *ENDIF
                !Leves
                    *IF,qnt_RL_CM,GT,0,THEN
                        *IF,qnt_RP_CM,GT,0,THEN
                            *IF,qnt_ant,EQ,0,THEN
                                *DO,contador1,1,(qnt_RP_CM+1)/2,1
                                    *DO,contador2,1,qnt_RL_CM,1
                                        lsel,s,loc,x,esp_dc+espacamento_RP_CM*(contador1-1)+espacamento_RL_CM*contador2
                                        lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_CM
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDDO
                                *ENDDO
                                *IF,MOD(qnt_RP_CM,2),EQ,0,THEN
                                    *DO,contador1,1,qnt_RP_CM/2,1
                                        lsel,s,loc,x,esp_dc+espacamento_RP_CM*qnt_RP_CM/2+espacamento_RL_CM*contador1
                                        lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDDO
                                    *IF,MOD(qnt_RL_CM,2),GT,0,THEN
                                        nsec=nsec+1
                                        lsel,s,loc,x,boca/2
                                        lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDIF
                                *ENDIF
                                nsec=nsec+1
                            *ELSE
                                *DO,contador1,1,(qnt_ant+1)/2,1
                                    *DO,contador2,1,qnt_RP_CM+1,1
                                        *DO,contador3,1,qnt_RL_CM,1
                                            lsel,s,loc,x,esp_dc+espacamento_ant*(contador1-1)+espacamento_RP_CM*(contador2-1)+espacamento_RL_CM*contador3
                                            lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDDO
                                    *ENDDO
                                *ENDDO
                                *IF,MOD(qnt_ant,2),EQ,0,THEN
                                    *DO,contador1,1,(qnt_RP_CM+1)/2
                                        *DO,contador2,1,qnt_RL_CM,1
                                            lsel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CM*(contador1-1)+contador2*espacamento_RL_CM
                                            lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDDO
                                    *ENDDO
                                    *IF,MOD(qnt_RP_CM,2),EQ,0,THEN
                                        *DO,contador1,1,qnt_RL_CM/2,1
                                            lsel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CM*qnt_RP_CM/2+espacamento_RL_CM*contador1
                                            lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDDO
                                        *IF,MOD(qnt_RL_CM,2),GT,0,THEN
                                            nsec=nsec+1
                                            lsel,s,loc,x,boca/2
                                            lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDIF
                                    *ENDIF
                                *ENDIF
                                nsec=nsec+1
                            *ENDIF
                        *ELSE
                            *IF,qnt_ant,EQ,0,THEN
                                *DO,contador1,1,qnt_RL_CM/2,1
                                    lsel,s,loc,x,esp_dc+espacamento_RL_CM*contador1
                                    lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDDO
                                nsec=nsec+1
                                *IF,MOD(qnt_RL_CM,2),GT,0,THEN
                                    lsel,s,loc,x,boca/2
                                    lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                    nsec=nsec+1
                                *ENDIF
                            *ELSE
                                *DO,contador1,1,(qnt_ant+1)/2,1
                                    *DO,contador2,1,qnt_RL_CM,1
                                        lsel,s,loc,x,esp_dc+(contador1-1)*espacamento_ant+contador2*espacamento_RL_CM
                                        lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDDO
                                *ENDDO
                                *IF,MOD(qnt_ant,2),EQ,0,THEN
                                    *DO,contador1,1,qnt_RL_CM/2,1
                                        lsel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RL_CM*contador1
                                        lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDDO
                                    *IF,MOD(qnt_RL_CM,2),GT,0,THEN
                                        nsec=nsec+1
                                        lsel,s,loc,x,boca/2
                                        lsel,r,loc,y,hdf+hcm,hdf+hcm*qnt_cm
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDIF
                                *ENDIF
                                nsec=nsec+1
                            *ENDIF
                        *ENDIF
                    *ENDIF
            *ENDIF
        !Reforçadores Convés Principal
            *IF,ID,GE,3,THEN
                !Pesado
                    *IF,qnt_RP_CP,GT,0,THEN
                        *IF,qnt_ant,EQ,0,THEN
                            *DO,contador1,1,qnt_RP_CP/2,1
                                lsel,s,loc,x,esp_dc+espacamento_RP_CP*contador1
                                lsel,r,loc,y,pontal,pontal*2
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDDO
                            nsec=nsec+1
                            *IF,MOD(qnt_RP_CP,2),GT,0,THEN
                                lsel,s,loc,x,boca/2
                                lsel,r,loc,y,pontal,pontal*2
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                                nsec=nsec+1
                            *ENDIF
                        *ELSE
                            *DO,contador1,1,(qnt_ant+1)/2,1
                                *DO,contador2,1,qnt_RP_CP,1
                                    lsel,s,loc,x,esp_dc+(contador1-1)*espacamento_ant+contador2*espacamento_RP_CP
                                    lsel,r,loc,y,pontal,pontal*2
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDDO
                            *ENDDO
                            *IF,MOD(qnt_ant,2),EQ,0,THEN
                                *DO,contador1,1,qnt_RP_CP/2,1
                                    lsel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CP*contador1
                                    lsel,r,loc,y,pontal,pontal*2
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDDO
                                *IF,MOD(qnt_RP_CP,2),GT,0,THEN
                                    nsec=nsec+1
                                    lsel,s,loc,x,boca/2
                                    lsel,r,loc,y,pontal,pontal*2
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDIF
                            *ENDIF
                            nsec=nsec+1
                        *ENDIF
                    *ENDIF
                !Leves
                    *IF,qnt_RL_CP,GT,0,THEN
                        *IF,qnt_RP_CP,GT,0,THEN
                            *IF,qnt_ant,EQ,0,THEN
                                *DO,contador1,1,(qnt_RP_CP+1)/2,1
                                    *DO,contador2,1,qnt_RL_CP,1
                                        lsel,s,loc,x,esp_dc+espacamento_RP_CP*(contador1-1)+espacamento_RL_CP*contador2
                                        lsel,r,loc,y,pontal,pontal*2
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDDO
                                *ENDDO
                                *IF,MOD(qnt_RP_CP,2),EQ,0,THEN
                                    *DO,contador1,1,qnt_RL_CP/2,1
                                        lsel,s,loc,x,esp_dc+espacamento_RP_CP*qnt_RP_CP/2+espacamento_RL_CP*contador1
                                        lsel,r,loc,y,pontal,pontal*2
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDDO
                                    *IF,MOD(qnt_RL_CP,2),GT,0,THEN
                                        nsec=nsec+1
                                        lsel,s,loc,x,boca/2
                                        lsel,r,loc,y,pontal,pontal*2
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDIF
                                *ENDIF
                                nsec=nsec+1
                            *ELSE
                                *DO,contador1,1,(qnt_ant+1)/2,1
                                    *DO,contador2,1,qnt_RP_CP+1,1
                                        *DO,contador3,1,qnt_RL_CP,1
                                            lsel,s,loc,x,esp_dc+espacamento_ant*(contador1-1)+espacamento_RP_CP*(contador2-1)+espacamento_RL_CP*contador3
                                            lsel,r,loc,y,pontal,pontal*2
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDDO
                                    *ENDDO
                                *ENDDO
                                *IF,MOD(qnt_ant,2),EQ,0,THEN
                                    *DO,contador1,1,(qnt_RP_CP+1)/2
                                        *DO,contador2,1,qnt_RL_CP,1
                                            lsel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CP*(contador1-1)+contador2*espacamento_RL_CP
                                            lsel,r,loc,y,pontal,pontal*2
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDDO
                                    *ENDDO
                                    *IF,MOD(qnt_RP_CP,2),EQ,0,THEN
                                        *DO,contador1,1,qnt_RL_CP/2,1
                                            lsel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_CP*qnt_RP_CP/2+espacamento_RL_CP*contador1
                                            lsel,r,loc,y,pontal,pontal*2
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDDO
                                        *IF,MOD(qnt_RL_CP,2),GT,0,THEN
                                            nsec=nsec+1
                                            lsel,s,loc,x,boca/2
                                            lsel,r,loc,y,pontal,pontal*2
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDIF
                                    *ENDIF
                                *ENDIF
                                nsec=nsec+1
                            *ENDIF
                        *ELSE
                            *IF,qnt_ant,EQ,0,THEN
                                *DO,contador1,1,qnt_RL_CP/2,1
                                    lsel,s,loc,x,esp_dc+espacamento_RL_CP*contador1
                                    lsel,r,loc,y,pontal,pontal*2
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDDO
                                nsec=nsec+1
                                *IF,MOD(qnt_RL_CP,2),GT,0,THEN
                                    lsel,s,loc,x,boca/2
                                    lsel,r,loc,y,pontal,pontal*2
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                    nsec=nsec+1
                                *ENDIF
                            *ELSE
                                *DO,contador1,1,(qnt_ant+1)/2,1
                                    *DO,contador2,1,qnt_RL_CP,1
                                        lsel,s,loc,x,esp_dc+(contador1-1)*espacamento_ant+contador2*espacamento_RL_CP
                                        lsel,r,loc,y,pontal,pontal*2
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDDO
                                *ENDDO
                                *IF,MOD(qnt_ant,2),EQ,0,THEN
                                    *DO,contador1,1,qnt_RL_CP/2,1
                                        lsel,s,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RL_CP*contador1
                                        lsel,r,loc,y,pontal,pontal*2
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDDO
                                    *IF,MOD(qnt_RL_CP,2),GT,0,THEN
                                        nsec=nsec+1
                                        lsel,s,loc,x,boca/2
                                        lsel,r,loc,y,pontal,pontal*2
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDIF
                                *ENDIF
                                nsec=nsec+1
                            *ENDIF
                        *ENDIF
                    *ENDIF
            *ENDIF
        !Reforçadores Costado
            *IF,esp_dc,GT,0,THEN
                !Pesado
                    *IF,qnt_RP_DC,GT,0,THEN
                        *IF,Tipo_RP_DC,EQ,1,THEN
                            *DO,contador1,1,qnt_RP_DC,1
                                lsel,s,loc,x,0
                                lsel,r,loc,y,h_cst+espacamento_RP_DC*contador1
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDDO
                            nsec=nsec+1
                        *ENDIF
                    *ENDIF
                !Leve
                    *IF,qnt_RL_DC,GT,0,THEN
                        *IF,qnt_RP_DC,GT,0,THEN
                            *DO,contador1,1,qnt_RP_DC+1,1
                                *DO,contador2,1,qnt_RL_DC,1
                                    lsel,s,loc,x,0
                                    lsel,r,loc,y,h_cst+espacamento_RP_DC*(contador1-1)+espacamento_RL_DC*contador2
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDDO
                            *ENDDO
                            nsec=nsec+1
                        *ELSE
                            *DO,contador1,1,qnt_RL_DC,1
                                lsel,s,loc,x,0
                                lsel,r,loc,y,h_cst+espacamento_RL_DC*contador1
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDDO
                            nsec=nsec+1
                        *ENDIF
                    *ENDIF
            *ENDIF
        !Reforçadores Duplo Costado
            *IF,esp_dc,GT,0,THEN
                !Pesados
                    *IF,qnt_RP_DC,GT,0,THEN
                        *IF,Tipo_RP_DC,EQ,1,THEN
                            *DO,contador1,1,qnt_RP_DC,1
                                lsel,s,loc,x,esp_dc
                                lsel,r,loc,y,h_dcst+espacamento_RP_DC*contador1
                                contador3=1
                                *DOWHILE,contador3
                                    lsel,u,loc,z,esp_cav_DC*(contador3-1)
                                    contador3=contador3+1
                                    *IF,contador3+1,GT,secao,THEN
                                        contador3=0
                                    *ENDIF
                                *ENDDO
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDDO
                            nsec=nsec+1
                        *ENDIF
                    *ENDIF
                !Leves
                    *IF,qnt_RL_DC,gt,0,THEN   
                        *IF,qnt_RP_DC,GT,0,THEN
                            *DO,contador1,1,qnt_RP_DC+1,1
                                *DO,contador2,1,qnt_RL_DC,1
                                    lsel,s,loc,x,esp_dc
                                    lsel,r,loc,y,h_dcst+espacamento_RP_DC*(contador1-1)+espacamento_RL_DC*contador2
                                    contador3=1
                                    *DOWHILE,contador3
                                        lsel,u,loc,z,esp_cav_DC*(contador3-1)
                                        contador3=contador3+1
                                        *IF,contador3+1,GT,secao,THEN
                                            contador3=0
                                        *ENDIF
                                    *ENDDO
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDDO
                            *ENDDO
                            nsec=nsec+1
                        *ELSE
                            *DO,contador1,1,qnt_RL_DC,1
                                lsel,s,loc,x,esp_dc
                                lsel,r,loc,y,h_dcst+espacamento_RL_DC*contador1
                                contador3=1
                                *DOWHILE,contador3
                                    lsel,u,loc,z,esp_cav_DC*(contador3-1)
                                    contador3=contador3+1
                                    *IF,contador3+1,GT,secao,THEN
                                        contador3=0
                                    *ENDIF
                                *ENDDO
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDDO
                            nsec=nsec+1
                        *ENDIF
                    *ENDIF
            *ENDIF
        !Reforçadores T2 Duplo Costado
            *IF,esp_dc,GT,0,THEN
                *IF,qnt_RP_DC,GT,0,AND,Tipo_RP_DC,EQ,2,THEN
                    asel,s,loc,y,h_CST+espacamento_RP_DC
                    *IF,qnt_RP_DC,GT,1,THEN
                        *DO,contador1,1,qnt_RP_DC-1,1
                            asel,a,loc,y,h_CST+espacamento_RP_DC*(contador1+1)
                        *ENDDO
                    *ENDIF
                    contador3=1
                    *DOWHILE,contador3
                        lsel,u,loc,z,esp_cav_DC*(contador3-1)
                        contador3=contador3+1
                        *IF,contador3+1,GT,secao,THEN
                            contador3=0
                        *ENDIF
                    *ENDDO
                    asel,r,loc,x,0,esp_dc
                    aatt,1,,1,,nsec
                    aesize,all,100
                    amesh,all
                    nsec=nsec+1
                *ENDIF
            *ENDIF
        !Reforçadores Teto Duplo Fundo
            !Pesados
                *IF,qnt_RP_DF,GT,0,THEN
                    *IF,Tipo_RP_DF,EQ,1,THEN
                        *IF,qnt_ant,EQ,0,THEN
                            *DO,contador1,1,qnt_RP_DF/2,1
                                lsel,s,loc,y,hdf
                                lsel,r,loc,x,espacamento_aux_DF+espacamento_RP_DF*contador1
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDDO
                            *IF,MOD(qnt_RP_DF,2),GT,0,THEN
                                nsec=nsec+1
                                lsel,s,loc,y,hdf
                                lsel,r,loc,x,boca/2
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDIF
                            nsec=nsec+1
                        *ELSE
                            *DO,contador1,1,qnt_RP_DF,1
                                lsel,s,loc,y,hdf
                                lsel,r,loc,x,espacamento_aux_DF+espacamento_RP_TTB*contador1
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDDO
                            *IF,qnt_ant,GT,1,THEN
                                *IF,qnt_ant,GT,2,THEN
                                    *DO,contador1,1,(qnt_ant-1)/2,1
                                        *DO,contador2,1,qnt_RP_DF,1
                                            lsel,s,loc,y,hdf
                                            lsel,r,loc,x,esp_dc+espacamento_ant*contador1+espacamento_TDF*contador2
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDDO
                                    *ENDDO
                                *ENDIF
                                *IF,MOD(qnt_ant,2),EQ,0,THEN
                                    *DO,contador1,1,qnt_RP_DF/2,1
                                        lsel,s,loc,y,hdf
                                        lsel,r,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*contador1
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDDO
                                    *IF,MOD(qnt_RP_DF,2),GT,0,THEN
                                        nsec=nsec+1
                                        lsel,s,loc,y,hdf
                                        lsel,r,loc,x,boca/2
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDIF
                                *ENDIF
                            *ENDIF
                            nsec=nsec+1
                        *ENDIF
                    *ENDIF
                *ENDIF
            !Leves
                *IF,qnt_RL_DF,GT,0,THEN
                    *IF,qnt_RP_DF,gt,0,THEN 
                        *IF,qnt_ant,EQ,0,THEN
                            *DO,contador1,1,(qnt_RP_DF+1)/2,1
                                *DO,contador2,1,qnt_RL_DF,1
                                    lsel,s,loc,y,hdf
                                    lsel,r,loc,x,espacamento_aux_DF+espacamento_RP_DF*(contador1-1)+espacamento_RL_DF*contador2
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDDO
                            *ENDDO
                            *IF,MOD(qnt_RP_DF,2),EQ,0,THEN
                                *DO,contador1,1,qnt_RL_DF/2,1
                                    lsel,s,loc,y,hdf
                                    lsel,r,loc,x,espacamento_aux_DF+espacamento_RP_DF*qnt_RP_DF/2+contador1*espacamento_RL_DF
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDDO
                                *IF,MOD(qnt_RL_DF,2),GT,0,THEN
                                    nsec=nsec+1
                                    lsel,s,loc,y,hdf
                                    lsel,r,loc,x,boca/2
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDIF
                            *ENDIF
                            nsec=nsec+1
                        *ELSE
                            *DO,contador1,1,qnt_RP_DF+1,1
                                *DO,contador2,1,qnt_RL_DF,1
                                    lsel,s,loc,y,hdf
                                    lsel,r,loc,x,espacamento_aux_DF+(contador1-1)*espacamento_RP_TTB+espacamento_RL_TTB*contador2
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDDO
                            *ENDDO
                            *IF,qnt_ant,GT,1,THEN
                                *IF,qnt_ant,GT,2,THEN
                                    *DO,contador1,1,(qnt_ant-1)/2,1
                                        *DO,contador2,1,qnt_RP_DF+1,1
                                            *DO,contador3,1,qnt_RL_DF,1
                                                lsel,s,loc,y,hdf
                                                lsel,r,loc,x,esp_dc+espacamento_ant*contador1+espacamento_RP_DF*(contador2-1)+espacamento_RL_DF*contador3
                                                latt,1,,2,,5000+nref,,nsec
                                                Lesize,all,100
                                                lmesh,all
                                                nref=nref+1
                                            *ENDDO
                                        *ENDDO
                                    *ENDDO
                                *ENDIF
                                *IF,MOD(qnt_ant,2),eq,0,THEN
                                    *DO,contador1,1,(qnt_RP_DF+1)/2,1
                                        *DO,contador2,1,qnt_RL_DF,1
                                            lsel,s,loc,y,hdf
                                            lsel,r,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*(contador1-1)+espacamento_RL_DF*contador2
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDDO
                                    *ENDDO
                                    *IF,MOD(qnt_RP_DF,2),EQ,0,THEN
                                        *DO,contador1,1,qnt_RL_DF/2,1
                                            lsel,s,loc,y,hdf
                                            lsel,r,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*qnt_RP_DF/2+espacamento_RL_DF*contador1
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDDO
                                        *IF,MOD(qnt_RL_DF,2),GT,0,THEN
                                            nsec=nsec+1
                                            lsel,s,loc,y,hdf
                                            lsel,r,loc,x,boca/2
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDIF
                                    *ENDIF
                                *ENDIF
                            *ENDIF
                            nsec=nsec+1
                        *ENDIF
                    *ELSE
                        *IF,qnt_ant,EQ,0,THEN
                            *DO,contador1,1,qnt_RL_DF/2,1
                                lsel,s,loc,y,hdf
                                lsel,r,loc,x,espacamento_aux_DF+espacamento_RL_DF*contador1
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDDO
                            *IF,MOD(qnt_RL_DF,2),GT,0,THEN
                                nsec=nsec+1
                                lsel,s,loc,y,hdf
                                lsel,r,loc,x,boca/2
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDIF
                            nsec=nsec+1
                        *ELSE
                            *DO,contador1,1,qnt_RL_DF,1
                                lsel,s,loc,y,hdf
                                lsel,r,loc,x,espacamento_aux_DF+espacamento_RL_TTB*contador1
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDDO
                            *IF,qnt_ant,GT,1,THEN
                                *IF,qnt_ant,GT,2,THEN
                                    *DO,contador1,1,(qnt_ant-1)/2,1
                                        *DO,contador2,1,qnt_RL_DF,1
                                            lsel,s,loc,y,hdf
                                            lsel,r,loc,x,esp_dc+espacamento_ant*contador1+espacamento_TDF*contador2
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDDO
                                    *ENDDO
                                *ENDIF
                                *IF,MOD(qnt_ant,2),EQ,0,THEN
                                    *DO,contador1,1,qnt_RL_DF/2,1
                                        lsel,s,loc,y,hdf
                                        lsel,r,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RL_DF*contador1
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDDO
                                    *IF,MOD(qnt_RL_DF,2),GT,0,THEN
                                        nsec=nsec+1
                                        lsel,s,loc,y,hdf
                                        lsel,r,loc,x,boca/2
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDIF
                                *ENDIF
                            *ENDIF
                            nsec=nsec+1
                        *ENDIF
                    *ENDIF
                *ENDIF
        !Reforçadores Fundo
            !Pesados
                *IF,qnt_RP_DF,GT,0,THEN
                    *IF,Tipo_RP_DF,EQ,1,THEN
                        *IF,qnt_ant,EQ,0,THEN
                            *DO,contador1,1,qnt_RP_DF/2,1
                                lsel,s,loc,y,-pontal,0
                                lsel,r,loc,x,espacamento_aux_DF+espacamento_RP_DF*contador1
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDDO
                            *IF,MOD(qnt_RP_DF,2),GT,0,THEN
                                nsec=nsec+1
                                lsel,s,loc,y,-pontal,0
                                lsel,r,loc,x,boca/2
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDIF
                            nsec=nsec+1
                        *ELSE
                            *DO,contador1,1,qnt_RP_DF,1
                                lsel,s,loc,y,-pontal,0
                                lsel,r,loc,x,espacamento_aux_DF+espacamento_RP_FTB*contador1
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDDO
                            *IF,qnt_ant,GT,1,THEN
                                *IF,qnt_ant,GT,2,THEN
                                    *DO,contador1,1,(qnt_ant-1)/2,1
                                        *DO,contador2,1,qnt_RP_DF,1
                                            lsel,s,loc,y,-pontal,0
                                            lsel,r,loc,x,esp_dc+espacamento_ant*contador1+espacamento_Fundo*contador2
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDDO
                                    *ENDDO
                                *ENDIF
                                *IF,MOD(qnt_ant,2),EQ,0,THEN
                                    *DO,contador1,1,qnt_RP_DF/2,1
                                        lsel,s,loc,y,-pontal,0
                                        lsel,r,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*contador1
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDDO
                                    *IF,MOD(qnt_RP_DF,2),GT,0,THEN
                                        nsec=nsec+1
                                        lsel,s,loc,y,-pontal,0
                                        lsel,r,loc,x,boca/2
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDIF
                                *ENDIF
                            *ENDIF
                            nsec=nsec+1
                        *ENDIF
                    *ENDIF
                *ENDIF
            !Leves
                *IF,qnt_RL_DF,GT,0,THEN
                    *IF,qnt_RP_DF,gt,0,THEN 
                        *IF,qnt_ant,EQ,0,THEN
                            *DO,contador1,1,(qnt_RP_DF+1)/2,1
                                *DO,contador2,1,qnt_RL_DF,1
                                    lsel,s,loc,y,-pontal,0
                                    lsel,r,loc,x,espacamento_aux_DF+espacamento_RP_DF*(contador1-1)+espacamento_RL_DF*contador2
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDDO
                            *ENDDO
                            *IF,MOD(qnt_RP_DF,2),EQ,0,THEN
                                *DO,contador1,1,qnt_RL_DF/2,1
                                    lsel,s,loc,y,-pontal,0
                                    lsel,r,loc,x,espacamento_aux_DF+espacamento_RP_DF*qnt_RP_DF/2+contador1*espacamento_RL_DF
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDDO
                                *IF,MOD(qnt_RL_DF,2),GT,0,THEN
                                    nsec=nsec+1
                                    lsel,s,loc,y,-pontal,0
                                    lsel,r,loc,x,boca/2
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDIF
                            *ENDIF
                            nsec=nsec+1
                        *ELSE
                            *DO,contador1,1,qnt_RP_DF+1,1
                                *DO,contador2,1,qnt_RL_DF,1
                                    lsel,s,loc,y,-pontal,0
                                    lsel,r,loc,x,espacamento_aux_DF+(contador1-1)*espacamento_RP_FTB+espacamento_RL_FTB*contador2
                                    latt,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                *ENDDO
                            *ENDDO
                            *IF,qnt_ant,GT,1,THEN
                                *IF,qnt_ant,GT,2,THEN
                                    *DO,contador1,1,(qnt_ant-1)/2,1
                                        *DO,contador2,1,qnt_RP_DF+1,1
                                            *DO,contador3,1,qnt_RL_DF,1
                                                lsel,s,loc,y,-pontal,0
                                                lsel,r,loc,x,esp_dc+espacamento_ant*contador1+espacamento_RP_DF*(contador2-1)+espacamento_RL_DF*contador3
                                                latt,1,,2,,5000+nref,,nsec
                                                Lesize,all,100
                                                lmesh,all
                                                nref=nref+1
                                            *ENDDO
                                        *ENDDO
                                    *ENDDO
                                *ENDIF
                                *IF,MOD(qnt_ant,2),eq,0,THEN
                                    *DO,contador1,1,(qnt_RP_DF+1)/2,1
                                        *DO,contador2,1,qnt_RL_DF,1
                                            lsel,s,loc,y,-pontal,0
                                            lsel,r,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*(contador1-1)+espacamento_RL_DF*contador2
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDDO
                                    *ENDDO
                                    *IF,MOD(qnt_RP_DF,2),EQ,0,THEN
                                        *DO,contador1,1,qnt_RL_DF/2,1
                                            lsel,s,loc,y,-pontal,0
                                            lsel,r,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*qnt_RP_DF/2+espacamento_RL_DF*contador1
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDDO
                                        *IF,MOD(qnt_RL_DF,2),GT,0,THEN
                                            nsec=nsec+1
                                            lsel,s,loc,y,-pontal,0
                                            lsel,r,loc,x,boca/2
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDIF
                                    *ENDIF
                                *ENDIF
                            *ENDIF
                            nsec=nsec+1
                        *ENDIF
                    *ELSE
                        *IF,qnt_ant,EQ,0,THEN
                            *DO,contador1,1,qnt_RL_DF/2,1
                                lsel,s,loc,y,-pontal,0
                                lsel,r,loc,x,espacamento_aux_DF+espacamento_RL_DF*contador1
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDDO
                            *IF,MOD(qnt_RL_DF,2),GT,0,THEN
                                nsec=nsec+1
                                lsel,s,loc,y,-pontal,0
                                lsel,r,loc,x,boca/2
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDIF
                            nsec=nsec+1
                        *ELSE
                            *DO,contador1,1,qnt_RL_DF,1
                                lsel,s,loc,y,-pontal,0
                                lsel,r,loc,x,espacamento_aux_DF+espacamento_RL_FTB*contador1
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                            *ENDDO
                            *IF,qnt_ant,GT,1,THEN
                                *IF,qnt_ant,GT,2,THEN
                                    *DO,contador1,1,(qnt_ant-1)/2,1
                                        *DO,contador2,1,qnt_RL_DF,1
                                            lsel,s,loc,y,-pontal,0
                                            lsel,r,loc,x,esp_dc+espacamento_ant*contador1+espacamento_Fundo*contador2
                                            latt,1,,2,,5000+nref,,nsec
                                            Lesize,all,100
                                            lmesh,all
                                            nref=nref+1
                                        *ENDDO
                                    *ENDDO
                                *ENDIF
                                *IF,MOD(qnt_ant,2),EQ,0,THEN
                                    *DO,contador1,1,qnt_RL_DF/2,1
                                        lsel,s,loc,y,-pontal,0
                                        lsel,r,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RL_DF*contador1
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDDO
                                    *IF,MOD(qnt_RL_DF,2),GT,0,THEN
                                        nsec=nsec+1
                                        lsel,s,loc,y,-pontal,0
                                        lsel,r,loc,x,boca/2
                                        latt,1,,2,,5000+nref,,nsec
                                        Lesize,all,100
                                        lmesh,all
                                        nref=nref+1
                                    *ENDIF
                                *ENDIF
                            *ENDIF
                            nsec=nsec+1
                        *ENDIF
                    *ENDIF
                *ENDIF
        !Reforçadores T2 Duplo Fundo
            *IF,Tipo_RP_DF,EQ,2,THEN
                *IF,qnt_ant,EQ,0,THEN
                    asel,s,loc,x,espacamento_aux_DF+espacamento_RP_DF
                    *IF,qnt_RP_DF,GT,3,THEN
                        *DO,contador1,1,(qnt_RP_DF-2)/2,1
                            asel,a,loc,x,espacamento_aux_DF+espacamento_RP_DF*(contador1+1)
                        *ENDDO
                    *ENDIF
                    asel,r,loc,y,-pontal,hdf
                    aatt,1,,1,,nsec
                    aesize,all,100
                    amesh,all
                    nsec=nsec+1
                *ELSE   
                    asel,s,loc,x,espacamento_aux_DF+espacamento_RP_TTB
                    *DO,contador1,1,qnt_RP_DF-1,1
                        asel,a,loc,x,espacamento_aux_DF+espacamento_RP_TTB*(contador1+1)
                    *ENDDO
                    *IF,qnt_ant,GT,1,THEN
                        *IF,qnt_ant,GT,2,THEN
                            *DO,contador1,1,(qnt_ant-1)/2,1
                                *DO,contador2,1,qnt_RP_DF,1
                                    asel,a,loc,x,esp_dc+espacamento_ant*contador1+espacamento_RP_DF*contador2
                                *ENDDO
                            *ENDDO
                        *ENDIF
                        *IF,MOD(qnt_ant,2),EQ,0,THEN
                            *DO,contador1,1,(qnt_RP_DF+1)/2,1
                                asel,a,loc,x,esp_dc+espacamento_ant*qnt_ant/2+espacamento_RP_DF*contador1
                            *ENDDO
                        *ENDIF
                    *ENDIF
                    asel,r,loc,y,-pontal,hdf
                    aatt,1,,1,,nsec
                    aesize,all,100
                    amesh,all
                    nsec=nsec+1
                *ENDIF
            *ENDIF
        !Reforçadores Tanque de Bojo
            *IF,esp_Ref_TB,GT,0,THEN
                !Costado Esquerdo
                    contador1=1
                    contador2=1
                    *DOWHILE,contador2
                        lsel,s,loc,x,0
                        lsel,r,loc,y,ybojo+esp_Ref_TB*contador1
                        lsel,u,loc,z,0
                        lsel,u,loc,z,secao
                        latt,1,,2,,5000+nref,,nsec
                        Lesize,all,100
                        lmesh,all
                        nref=nref+1
                        contador1 = contador1+1
                        *IF,ybojo+esp_Ref_TB*contador1,GT,h_aux_TB,THEN
                            contador2 = 0
                        *ENDIF
                    *ENDDO
                !Fundo Esquerdo
                    contador1=1
                    contador2=1
                    *DOWHILE,contador2
                        lsel,s,loc,y,-pontal,0
                        lsel,r,loc,x,xbojo+esp_Ref_TB*contador1
                        lsel,u,loc,z,0
                        lsel,u,loc,z,secao
                        latt,1,,2,,5000+nref,,nsec
                        Lesize,all,100
                        lmesh,all
                        nref=nref+1
                        contador1 = contador1+1
                        *IF,xbojo+esp_Ref_TB*contador1,GT,L_aux_TB,THEN
                            contador2 = 0
                        *ENDIF
                    *ENDDO
                *IF,Id,NE,2,THEN
                    !Diagonal Esquerdo
                        contador1=1
                        contador2=1
                        WPOFFS,L_TB,hdf,0
                        wprota,-a_aux_TB,0,-90
                        csys,wp
                        *DOWHILE,contador2
                            lsel,s,loc,z,esp_ref_TB*contador1
                            lsel,r,loc,y,-h_tb/2,0
                            latt,1,,2,,5000+nref,,nsec
                            Lesize,all,100
                            lmesh,all
                            nref=nref+1
                            contador1 = contador1+1
                            *IF,esp_Ref_TB*contador1,GE,l_TB_diagonal-RL_TB_W1,THEN
                                contador2 = 0
                            *ENDIF
                        *ENDDO
                        csys,0
                        wpcsys
                *ELSE
                    !Topo Esquerdo  
                        contador1 = 1
                        contador2 = 1
                        *DOWHILE,contador2
                            lsel,s,loc,y,h_aux_tb
                            lsel,r,loc,x,esp_Ref_TB*contador1
                            lsel,u,loc,z,0
                            lsel,u,loc,z,secao
                            latt,1,,2,,5000+nref,,nsec
                            Lesize,all,100
                            lmesh,all
                            nref=nref+1
                            contador1 = contador1+1
                            *IF,esp_Ref_TB*contador1,GT,L_aux_TB,THEN
                                contador2 = 0
                            *ENDIF
                        *ENDDO
                    !Interno Esquerdo
                        contador1=1
                        contador2=1
                        *DOWHILE,contador2
                            lsel,s,loc,x,L_aux_Tb
                            lsel,r,loc,y,esp_Ref_TB*contador1-aux_tb_interno
                            lsel,u,loc,z,0
                            lsel,u,loc,z,secao
                            latt,1,,2,,5000+nref,,nsec
                            Lesize,all,100
                            lmesh,all
                            nref=nref+1
                            contador1 = contador1+1
                            *IF,esp_Ref_TB*contador1,GT,h_aux_TB,THEN
                                contador2 = 0
                            *ENDIF
                        *ENDDO
                *ENDIF
                nsec=nsec+1
            *ENDIF
        !Reforçadores Tanque de Asa
            *IF,espacamento_Ref_TA,GT,0,THEN
                !Costado Esquerdo
                    contador1=1
                    contador2=1
                    *DOWHILE,contador2
                        lsel,s,loc,x,0
                        lsel,r,loc,y,pontal-h_Max_TA+espacamento_Ref_TA*contador1
                        lsel,u,loc,z,0
                        lsel,u,loc,z,secao
                        latt,1,,2,,5000+nref,,nsec
                        Lesize,all,100
                        lmesh,all
                        nref=nref+1
                        contador1 = contador1+1
                        *IF,espacamento_Ref_TA*contador1,GE,h_Max_TA-RL_TA_W1,THEN
                            contador2 = 0
                        *ENDIF
                    *ENDDO
                !Topo Esquerdo
                    contador1=1
                    contador2=1
                    *DOWHILE,contador2
                        lsel,s,loc,x,espacamento_Ref_TA*contador1
                        lsel,r,loc,y,pontal,pontal*2
                        lsel,u,loc,z,0
                        lsel,u,loc,z,secao
                        latt,1,,2,,5000+nref,,nsec
                        Lesize,all,100
                        lmesh,all
                        nref=nref+1
                        contador1 = contador1+1
                        *IF,espacamento_Ref_TA*contador1,GE,l_TA-RL_TA_W1,THEN
                            contador2 = 0
                        *ENDIF
                    *ENDDO
                !Diagonal Esquerdo
                    contador1=1
                    contador2=1
                    WPOFFS,esp_dc,pontal-h_Max_TA,0
                    wprota,a_aux_TA,0,-90
                    csys,wp
                    *DOWHILE,contador2
                        lsel,s,loc,z,-espacamento_Ref_TA*contador1
                        lsel,r,loc,y,-h_max_ta-h_min_ta,0
                        latt,1,,2,,5000+nref,,nsec
                        Lesize,all,100
                        lmesh,all
                        nref=nref+1
                        contador1 = contador1+1
                        *IF,espacamento_Ref_TA*contador1,GE,l_TA_diagonal-RL_TA_W1,THEN
                            contador2 = 0
                        *ENDIF
                    *ENDDO
                    csys,0
                    wpcsys 
                nsec=nsec+1
            *ENDIF
        !Reforçadores Antepara
            *IF,qnt_ant,EQ,1,THEN
                contador1=1
                *DOWHILE,contador1  
                    lsel,s,loc,x,boca/2
                    lsel,r,loc,y,hdf,pontal*2
                    lsel,r,loc,z,contador1*esp_ref_ant
                    latt,1,,2,,5000+nref,,nsec
                    Lesize,all,100
                    lmesh,all  
                    nref=nref+1
                    *IF,(contador1+1)*esp_ref_ant,GE,secao,THEN
                        contador1=0
                    *ELSE
                        contador1=contador1+1
                    *ENDIF
                *ENDDO
                nsec=nsec+1
            *ENDIF
        !Cavernas
            !Topo
                *IF,esp_cav_topo,gt,0,THEN
                    !TA
                        *IF,ID,eq,1,THEN
                            contador1=1
                            *DOWHILE,contador1
                                lsel,s,loc,z,esp_cav_topo*(contador1-1)
                                lsel,r,loc,y,pontal-H_MAX_TA,pontal*2
                                lsel,r,loc,x,0,L_TA
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                                contador1=contador1+1
                                *IF,esp_cav_topo*(contador1-1),GT,secao,THEN
                                    contador1=0
                                *ENDIF
                            *ENDDO                       
                            nsec=nsec+1
                        *ENDIF
                    !CP
                        *IF,ID,GE,2,THEN
                            *IF,ID,GT,2,OR,esp_dc,GT,0,THEN
                                contador1=1
                                *DOWHILE,contador1
                                    lsel,s,loc,y,pontal,pontal*2
                                    lsel,r,loc,z,esp_cav_topo*(contador1-1)
                                    LATT,1,,2,,5000+nref,,nsec
                                    Lesize,all,100
                                    lmesh,all
                                    nref=nref+1
                                    contador1=contador1+1
                                    *IF,esp_cav_topo*(contador1-1),GT,secao,THEN
                                        contador1=0
                                    *ENDIF
                                *ENDDO
                                nsec=nsec+1
                            *ENDIF
                        *ENDIF
                *ENDIF
            !Costados
                *IF,esp_cav_DC,gt,0,THEN
                    contador1=1
                    *DOWHILE,contador1
                        lsel,s,loc,x,0
                        lsel,a,loc,x,esp_dc
                        lsel,r,loc,y,h_aux_tb,pontal-h_max_TA
                        lsel,r,loc,z,esp_cav_DC*(contador1-1)
                        latt,1,,2,,5000+nref,,nsec
                        Lesize,all,100
                        lmesh,all
                        nref=nref+1
                        contador1=contador1+1
                        *IF,esp_cav_DC*(contador1-1),GT,secao,THEN
                            contador1=0
                        *ENDIF
                    *ENDDO
                    nsec=nsec+1
                *ENDIF
            !Fundo  
                *IF,esp_cav_DF,gt,0,THEN
                    !TB
                        *IF,L_TB,GT,0,THEN
                            contador1=1
                            *DOWHILE,contador1
                                lsel,s,loc,x,0,L_aux_TB
                                lsel,r,loc,y,-pontal,H_aux_TB
                                lsel,r,loc,z,esp_cav_DF*(contador1-1)
                                latt,1,,2,,5000+nref,,nsec
                                Lesize,all,100
                                lmesh,all
                                nref=nref+1
                                contador1=contador1+1
                                *IF,(contador1-1)*esp_cav_DF,GT,secao,THEN
                                    contador1=0
                                *ENDIF
                            *ENDDO
                            nsec=nsec+1
                        *ENDIF
                    !Fundo  
                        contador1=1
                        *DOWHILE,contador1
                            lsel,s,loc,y,hdf
                            lsel,a,loc,y,-pontal,0
                            lsel,r,loc,x,l_aux_TB,boca/2
                            lsel,r,loc,z,esp_cav_DF*(contador1-1)
                            latt,1,,2,,5000+nref,,nsec
                            Lesize,all,100
                            lmesh,all
                            nref=nref+1
                            contador1=contador1+1
                            *IF,(contador1-1)*esp_cav_DF,GT,secao,THEN
                                contador1=0
                            *ENDIF
                        *ENDDO
                        nsec=nsec+1
                *ENDIF
            !Correção de orientação
                asel,s,loc,y,hdf
                asel,r,loc,x,espacamento_aux_DF,boca/2
                asel,a,loc,x,esp_dc
                AREVERSE,all,0
            !Simetria 
            /REPLOT
            SAVE
            GPLOT
!Condições de Contorno e carregamento
    lsel,s,loc,z,0
    lsel,a,loc,z,secao
    dl,all,,all,0
    lsel,s,loc,x,boca/2
    lsel,u,loc,z,0
    lsel,u,loc,z,secao
    dl,all,,ux,0
    dl,all,,roty,0
    dl,all,,rotz,0 
    !Carregamentos
        !Pressão hidrostática
            asel,s,loc,x,0
            asel,a,loc,Y,-pontal,ybojo
            asel,u,loc,x,xbojo,boca/2
            asel,a,loc,y,-pontal,0
            asel,r,loc,y,-pontal,calado
            SFGRAD,pres,0,y,calado,rho_agua*9810
            SFA,all,2,press,0
        !Carga interna
            asel,s,loc,x,esp_dc,boca-esp_dc
            Asel,r,loc,y,hdf,hdf+h_carga
            SFGRAD,pres,0,y,h_carga,rho_carga*9810
            SFA,all,2,press,0
    !Coupling
        n,5000000,boca/4,pontal/2,0
        n,5000001,boca/4,pontal/2,secao
        ET,3,MASS21
        R,1
        TYPE,3
        E,5000000
        ET,4,MASS21
        TYPE,4
        E,5000001
        nsel,all
        F,5000000,FY,Cortante_1*1000
        F,5000000,My,Momento_1*1000
        F,5000001,FY,Cortante_2*1000
        F,5000001,My,Momento_2*1000
        nsel,s,loc,z,0
        cm,dependentes_1,NODE
        nsel,s,loc,z,secao
        cm,dependentes_2,node
        nsel,s,node,,all
        RBE3,5000000,ALL,dependentes_1
        RBE3,5000001,ALL,dependentes_2
        ALLSEL
        EPLOT
!Solução
    FINISH
    /SOL
    SOLVE
    FINISH
!Saídas
    /POST1 
    SET,LAST
    /SHOW 
    PLNSOL,S,EQV 
    *get,tensao,smx
    *cfopen,'tensao.txt',' ',' '
    *VWRITE,tensao, , , , , , , , ,
    (f12.4)
    *CFCLOS
    *get,massa,elem,,mtot,x
    massa_metro = massa/(secao/1000)
    *cfopen,'Massa_por_metro.txt',' ',' '
    *vwrite,massa_metro, , , , , , , , ,
    (f12.4)
    *CFCLOS

